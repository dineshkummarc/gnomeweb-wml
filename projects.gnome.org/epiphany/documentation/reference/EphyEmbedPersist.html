<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>EphyEmbedPersist</title><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Epiphany Reference Manual"><link rel="up" href="ch01.html" title="Epiphany"><link rel="previous" href="EphyEmbedSingle.html" title="EphyEmbedSingle"><link rel="next" href="epiphany-EphyEmbedFactory.html" title="EphyEmbedFactory"><meta name="generator" content="GTK-Doc V1.2 (XML mode)"><style type="text/css">
        .synopsis, .classsynopsis {
            background: #eeeeee;
            border: solid 1px #aaaaaa;
            padding: 0.5em;
        }
        .programlisting {
            background: #eeeeff;
            border: solid 1px #aaaaff;
            padding: 0.5em;
        }
        .variablelist {
            padding: 4px;
            margin-left: 3em;
        }
        .navigation {
            background: #ffeeee;
            border: solid 1px #ffaaaa;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }
        .navigation a {
            color: #770000;
        }
        .navigation a:visited {
            color: #550000;
        }
        .navigation .title {
            font-size: 200%;
        }
      </style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle"><td><a accesskey="p" href="EphyEmbedSingle.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td><td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td><td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td><th width="100%" align="center">Epiphany Reference Manual</th><td><a accesskey="n" href="epiphany-EphyEmbedFactory.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td></tr></table><div class="refentry" lang="en"><a name="EphyEmbedPersist"></a><div class="titlepage"><div></div><div></div></div><div class="refnamediv"><h2><span class="refentrytitle">EphyEmbedPersist</span></h2><p>EphyEmbedPersist &#8212; A class to download files</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">



enum        <a href="EphyEmbedPersist.html#EmbedPersistFlags">EmbedPersistFlags</a>;
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-dest">ephy_embed_persist_set_dest</a>     (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-embed">ephy_embed_persist_set_embed</a>    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             <a href="EphyEmbed.html" title="EphyEmbed">EphyEmbed</a> *value);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-fc-title">ephy_embed_persist_set_fc_title</a> (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-fc-parent">ephy_embed_persist_set_fc_parent</a>
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             GtkWindow *value);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-flags">ephy_embed_persist_set_flags</a>    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             <a href="EphyEmbedPersist.html#EmbedPersistFlags">EmbedPersistFlags</a> value);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-max-size">ephy_embed_persist_set_max_size</a> (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             long value);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-persist-key">ephy_embed_persist_set_persist_key</a>
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-set-source">ephy_embed_persist_set_source</a>   (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);
const char* <a href="EphyEmbedPersist.html#ephy-embed-persist-get-dest">ephy_embed_persist_get_dest</a>     (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
<a href="EphyEmbed.html" title="EphyEmbed">EphyEmbed</a>*  <a href="EphyEmbedPersist.html#ephy-embed-persist-get-embed">ephy_embed_persist_get_embed</a>    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
const char* <a href="EphyEmbedPersist.html#ephy-embed-persist-get-fc-title">ephy_embed_persist_get_fc_title</a> (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
GtkWindow*  <a href="EphyEmbedPersist.html#ephy-embed-persist-get-fc-parent">ephy_embed_persist_get_fc_parent</a>
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
<a href="EphyEmbedPersist.html#EmbedPersistFlags">EmbedPersistFlags</a> <a href="EphyEmbedPersist.html#ephy-embed-persist-get-flags">ephy_embed_persist_get_flags</a>
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
long        <a href="EphyEmbedPersist.html#ephy-embed-persist-get-max-size">ephy_embed_persist_get_max_size</a> (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
const char* <a href="EphyEmbedPersist.html#ephy-embed-persist-get-persist-key">ephy_embed_persist_get_persist_key</a>
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
const char* <a href="EphyEmbedPersist.html#ephy-embed-persist-get-source">ephy_embed_persist_get_source</a>   (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
gboolean    <a href="EphyEmbedPersist.html#ephy-embed-persist-save">ephy_embed_persist_save</a>         (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
void        <a href="EphyEmbedPersist.html#ephy-embed-persist-cancel">ephy_embed_persist_cancel</a>       (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);
char*       <a href="EphyEmbedPersist.html#ephy-embed-persist-to-string">ephy_embed_persist_to_string</a>    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);

</pre></div><div class="refsect1" lang="en"><a name="id2680627"></a><h2>Description</h2><p>
An <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a> is a relatively simple way to save a web page or file to
disk. It is an abstract class, implemented by <span class="type">MozillaEmbedPersist</span>.
</p><p>
To create an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>, use <a href="epiphany-EphyEmbedFactory.html#ephy-embed-factory-new-object"><tt class="function">ephy_embed_factory_new_object()</tt></a>. Next, call
<a href="EphyEmbedPersist.html#ephy-embed-persist-set-flags"><tt class="function">ephy_embed_persist_set_flags()</tt></a> and <a href="EphyEmbedPersist.html#ephy-embed-persist-set-embed"><tt class="function">ephy_embed_persist_set_embed()</tt></a>. Depending
on the flags, you may also want to call <a href="EphyEmbedPersist.html#ephy-embed-persist-set-dest"><tt class="function">ephy_embed_persist_set_dest()</tt></a> or
<a href="EphyEmbedPersist.html#ephy-embed-persist-set-source"><tt class="function">ephy_embed_persist_set_source()</tt></a>. Finally, call <a href="EphyEmbedPersist.html#ephy-embed-persist-save"><tt class="function">ephy_embed_persist_save()</tt></a> to
save the file.
</p><p>
</p><div class="example"><a name="id2680706"></a><p class="title"><b>Example 3. Saving the current web page to disk</b></p><pre class="programlisting">#include &lt;epiphany/ephy-embed-persist.h&gt;
#include &lt;epiphany/ephy-embed.h&gt;

static void
save_source_completed_cb (EphyEmbedPersist *persist,
			  gpointer dummy)
{
	g_print ("Download to %s complete.\n",
		 ephy_embed_persist_get_dest (persist));
}

void
save_page (EphyEmbed *embed,
	   const char *filename)
{
	EphyEmbedPersist *persist;

	persist = EPHY_EMBED_PERSIST
		(ephy_embed_factory_new_object ("EphyEmbedPersist"));

	ephy_embed_persist_set_embed (persist, embed);
	ephy_embed_persist_set_flags (persist, EMBED_PERSIST_NO_VIEW |
					       EMBED_PERSIST_COPY_PAGE);
	ephy_embed_persist_set_dest (persist, filename);

	g_signal_connect (persist, "completed",
			  G_CALLBACK (save_source_completed_cb), NULL);
	
	ephy_embed_persist_save (persist);

	g_object_unref (persist);
}
</pre></div><p>
</p></div><div class="refsect1" lang="en"><a name="id2619960"></a><h2>Details</h2><div class="refsect2" lang="en"><a name="id2663480"></a><h3><a name="EmbedPersistFlags"></a>enum EmbedPersistFlags</h3><a class="indexterm" name="id2641845"></a><pre class="programlisting">typedef enum
{
	EMBED_PERSIST_COPY_PAGE		= 1 &lt;&lt; 0,
	EMBED_PERSIST_MAINDOC		= 1 &lt;&lt; 1,
	EMBED_PERSIST_NO_VIEW		= 1 &lt;&lt; 2,
	EMBED_PERSIST_ASK_DESTINATION	= 1 &lt;&lt; 3,
	EMBED_PERSIST_DO_CONVERSION     = 1 &lt;&lt; 4
} EmbedPersistFlags;
</pre><p>
Determines how the <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a> should act.
</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><tt class="literal">EMBED_PERSIST_COPY_PAGE</tt></span></td><td>If set, download a copy of the page being browsed by
			  the <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>'s <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a>. This should be
			  specified with <a href="EphyEmbedPersist.html#ephy-embed-persist-set-embed"><tt class="function">ephy_embed_persist_set_embed()</tt></a>. If
			  unset, <a href="EphyEmbedPersist.html#ephy-embed-persist-set-source"><tt class="function">ephy_embed_persist_set_source()</tt></a> must have been
			  called.
</td></tr><tr><td><span class="term"><tt class="literal">EMBED_PERSIST_MAINDOC</tt></span></td><td>If set and <tt class="literal">EMBED_PERSIST_COPY_PAGE</tt> is set, download the
			<a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>'s <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a>'s page's frameset. If
			unset, download the currently-focused frame.
</td></tr><tr><td><span class="term"><tt class="literal">EMBED_PERSIST_NO_VIEW</tt></span></td><td>If set, do not display this download in the download
			manager.
</td></tr><tr><td><span class="term"><tt class="literal">EMBED_PERSIST_ASK_DESTINATION</tt></span></td><td>If set, display a filechooser dialog. You must
				call <a href="EphyEmbedPersist.html#ephy-embed-persist-set-fc-title"><tt class="function">ephy_embed_persist_set_fc_title()</tt></a> and
				<a href="EphyEmbedPersist.html#ephy-embed-persist-set-fc-parent"><tt class="function">ephy_embed_persist_set_fc_parent()</tt></a> before
				<a href="EphyEmbedPersist.html#ephy-embed-persist-save"><tt class="function">ephy_embed_persist_save()</tt></a> if this is the case.
				If unset, use the destination specified with
				<a href="EphyEmbedPersist.html#ephy-embed-persist-set-dest"><tt class="function">ephy_embed_persist_set_dest()</tt></a>.
</td></tr><tr><td><span class="term"><tt class="literal">EMBED_PERSIST_DO_CONVERSION</tt></span></td><td>

</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2661226"></a><h3><a name="ephy-embed-persist-set-dest"></a>ephy_embed_persist_set_dest ()</h3><a class="indexterm" name="id2661233"></a><pre class="programlisting">void        ephy_embed_persist_set_dest     (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);</pre><p>
Sets the path to which <i class="parameter"><tt>persist</tt></i> should save data.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>value</tt></i> :</span></td><td> the path to which <i class="parameter"><tt>persist</tt></i> should save data
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2661295"></a><h3><a name="ephy-embed-persist-set-embed"></a>ephy_embed_persist_set_embed ()</h3><a class="indexterm" name="id2661303"></a><pre class="programlisting">void        ephy_embed_persist_set_embed    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             <a href="EphyEmbed.html" title="EphyEmbed">EphyEmbed</a> *value);</pre><p>
Sets the <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a> from which <i class="parameter"><tt>persist</tt></i> will download data.
</p><p>
An <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a> is absolutely required to download if <i class="parameter"><tt>persist</tt></i>'s
<a href="EphyEmbedPersist.html#EmbedPersistFlags"><span class="type">EmbedPersistFlags</span></a> include <tt class="literal">EMBED_PERSIST_COPY_PAGE</tt>. Regardless, an
<a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a> should be set for <span class="emphasis"><em>every</em></span> <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>,
since it determines request information such as the referring page.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>value</tt></i> :</span></td><td> a parent <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2661408"></a><h3><a name="ephy-embed-persist-set-fc-title"></a>ephy_embed_persist_set_fc_title ()</h3><a class="indexterm" name="id2661417"></a><pre class="programlisting">void        ephy_embed_persist_set_fc_title (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);</pre><p>
Sets the title of the filechooser window. The filechooser will only be
displayed if <tt class="literal">EMBED_PERSIST_ASK_DESTINATION</tt> has been set with
<a href="EphyEmbedPersist.html#ephy-embed-persist-set-flags"><tt class="function">ephy_embed_persist_set_flags()</tt></a>.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>value</tt></i> :</span></td><td> the title to be displayed by the filechooser
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2687972"></a><h3><a name="ephy-embed-persist-set-fc-parent"></a>ephy_embed_persist_set_fc_parent ()</h3><a class="indexterm" name="id2687981"></a><pre class="programlisting">void        ephy_embed_persist_set_fc_parent
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             GtkWindow *value);</pre><p>
Sets the <a href="EphyWindow.html" title="EphyWindow"><span class="type">EphyWindow</span></a> which should be <i class="parameter"><tt>persist</tt></i>'s filechooser's parent. The
filechooser will only be displayed if <tt class="literal">EMBED_PERSIST_ASK_DESTINATION</tt> has been
set with <a href="EphyEmbedPersist.html#ephy-embed-persist-set-flags"><tt class="function">ephy_embed_persist_set_flags()</tt></a>.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>value</tt></i> :</span></td><td> the <a href="EphyWindow.html" title="EphyWindow"><span class="type">EphyWindow</span></a> which should be the filechooser's parent
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688069"></a><h3><a name="ephy-embed-persist-set-flags"></a>ephy_embed_persist_set_flags ()</h3><a class="indexterm" name="id2688077"></a><pre class="programlisting">void        ephy_embed_persist_set_flags    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             <a href="EphyEmbedPersist.html#EmbedPersistFlags">EmbedPersistFlags</a> value);</pre><p>
Sets the flags to be used for <i class="parameter"><tt>persist</tt></i>'s download.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>value</tt></i> :</span></td><td> the desired <a href="EphyEmbedPersist.html#EmbedPersistFlags"><span class="type">EmbedPersistFlags</span></a>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688147"></a><h3><a name="ephy-embed-persist-set-max-size"></a>ephy_embed_persist_set_max_size ()</h3><a class="indexterm" name="id2688155"></a><pre class="programlisting">void        ephy_embed_persist_set_max_size (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             long value);</pre><p>
Sets the maximum size of <i class="parameter"><tt>persist</tt></i>'s download.
</p><p>
If the requested file is discovered to be larger than <i class="parameter"><tt>value</tt></i>, the download
will be aborted. Note that <i class="parameter"><tt>persist</tt></i> will have to actually begin downloading
before it can abort, since it doesn't know the filesize before the download
starts.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>Param2</tt></i> :</span></td><td>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688232"></a><h3><a name="ephy-embed-persist-set-persist-key"></a>ephy_embed_persist_set_persist_key ()</h3><a class="indexterm" name="id2688240"></a><pre class="programlisting">void        ephy_embed_persist_set_persist_key
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);</pre><p>
Sets the GConf key from which <i class="parameter"><tt>persist</tt></i> will determine the default download
directory.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>value</tt></i> :</span></td><td> a GConf key
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688306"></a><h3><a name="ephy-embed-persist-set-source"></a>ephy_embed_persist_set_source ()</h3><a class="indexterm" name="id2688314"></a><pre class="programlisting">void        ephy_embed_persist_set_source   (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist,
                                             const char *value);</pre><p>
Sets the URL from which <i class="parameter"><tt>persist</tt></i> should download. This should be used in
conjunction with <a href="EphyEmbedPersist.html#ephy-embed-persist-set-embed"><tt class="function">ephy_embed_persist_set_embed()</tt></a>.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>value</tt></i> :</span></td><td> the URL from which <i class="parameter"><tt>persist</tt></i> should download
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688388"></a><h3><a name="ephy-embed-persist-get-dest"></a>ephy_embed_persist_get_dest ()</h3><a class="indexterm" name="id2688397"></a><pre class="programlisting">const char* ephy_embed_persist_get_dest     (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the destination filename to which <i class="parameter"><tt>persist</tt></i> will save its download.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> <i class="parameter"><tt>persist</tt></i>'s destination filename
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688457"></a><h3><a name="ephy-embed-persist-get-embed"></a>ephy_embed_persist_get_embed ()</h3><a class="indexterm" name="id2688465"></a><pre class="programlisting"><a href="EphyEmbed.html" title="EphyEmbed">EphyEmbed</a>*  ephy_embed_persist_get_embed    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a> from which <i class="parameter"><tt>persist</tt></i> will download.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> the <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a> from which <i class="parameter"><tt>persist</tt></i> will download
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688537"></a><h3><a name="ephy-embed-persist-get-fc-title"></a>ephy_embed_persist_get_fc_title ()</h3><a class="indexterm" name="id2688546"></a><pre class="programlisting">const char* ephy_embed_persist_get_fc_title (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the title to be displayed in <i class="parameter"><tt>persist</tt></i>'s filechooser.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> the title to be displayed in <i class="parameter"><tt>persist</tt></i>'s filechooser
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688606"></a><h3><a name="ephy-embed-persist-get-fc-parent"></a>ephy_embed_persist_get_fc_parent ()</h3><a class="indexterm" name="id2688614"></a><pre class="programlisting">GtkWindow*  ephy_embed_persist_get_fc_parent
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the <a href="EphyWindow.html" title="EphyWindow"><span class="type">EphyWindow</span></a> which should serve as a parent for <i class="parameter"><tt>persist</tt></i>'s
filechooser.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> the <a href="EphyWindow.html" title="EphyWindow"><span class="type">EphyWindow</span></a> parent for <i class="parameter"><tt>persist</tt></i>'s filechooser
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688687"></a><h3><a name="ephy-embed-persist-get-flags"></a>ephy_embed_persist_get_flags ()</h3><a class="indexterm" name="id2688696"></a><pre class="programlisting"><a href="EphyEmbedPersist.html#EmbedPersistFlags">EmbedPersistFlags</a> ephy_embed_persist_get_flags
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns <i class="parameter"><tt>persist</tt></i>'s <a href="EphyEmbedPersist.html#EmbedPersistFlags"><span class="type">EmbedPersistFlags</span></a>.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> <i class="parameter"><tt>persist</tt></i>'s <a href="EphyEmbedPersist.html#EmbedPersistFlags"><span class="type">EmbedPersistFlags</span></a>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688769"></a><h3><a name="ephy-embed-persist-get-max-size"></a>ephy_embed_persist_get_max_size ()</h3><a class="indexterm" name="id2688777"></a><pre class="programlisting">long        ephy_embed_persist_get_max_size (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the maximum size of <i class="parameter"><tt>persist</tt></i>'s requested download, in bytes.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> the maximum size of <i class="parameter"><tt>persist</tt></i>'s requested download, in bytes
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688836"></a><h3><a name="ephy-embed-persist-get-persist-key"></a>ephy_embed_persist_get_persist_key ()</h3><a class="indexterm" name="id2688845"></a><pre class="programlisting">const char* ephy_embed_persist_get_persist_key
                                            (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the GConf key which determines Epiphany's default download directory.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> the GConf key to the default download directory
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688903"></a><h3><a name="ephy-embed-persist-get-source"></a>ephy_embed_persist_get_source ()</h3><a class="indexterm" name="id2688911"></a><pre class="programlisting">const char* ephy_embed_persist_get_source   (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the source URL of the file to download.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> a source URL
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2688966"></a><h3><a name="ephy-embed-persist-save"></a>ephy_embed_persist_save ()</h3><a class="indexterm" name="id2688974"></a><pre class="programlisting">gboolean    ephy_embed_persist_save         (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Begins saving the file specified in <i class="parameter"><tt>persist</tt></i>.
</p><p>
If <i class="parameter"><tt>persist</tt></i>'s <a href="EphyEmbedPersist.html#EmbedPersistFlags"><span class="type">EmbedPersistFlags</span></a> include <tt class="literal">EMBED_PERSIST_ASK_DESTINATION</tt>, a
filechooser dialog will be shown first.
</p><p>
The file will continue to download in the background until either the
::completed or the ::cancelled signals are emitted by <i class="parameter"><tt>persist</tt></i>.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> <tt class="literal">TRUE</tt> if the download began successfully
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2689059"></a><h3><a name="ephy-embed-persist-cancel"></a>ephy_embed_persist_cancel ()</h3><a class="indexterm" name="id2689067"></a><pre class="programlisting">void        ephy_embed_persist_cancel       (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Cancels <i class="parameter"><tt>persist</tt></i>'s download. This will not delete the partially downloaded
file.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2689115"></a><h3><a name="ephy-embed-persist-to-string"></a>ephy_embed_persist_to_string ()</h3><a class="indexterm" name="id2689123"></a><pre class="programlisting">char*       ephy_embed_persist_to_string    (<a href="EphyEmbedPersist.html" title="EphyEmbedPersist">EphyEmbedPersist</a> *persist);</pre><p>
Returns the download specified by <i class="parameter"><tt>persist</tt></i> as a string instead of downloading
it to a file.
</p><p>
The download is synchronous. An <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a> must be specified with
<a href="EphyEmbedPersist.html#ephy-embed-persist-set-embed"><tt class="function">ephy_embed_persist_set_embed()</tt></a>. The function implicitly assumes that
<i class="parameter"><tt>persist</tt></i>'s <a href="EphyEmbedPersist.html#EmbedPersistFlags"><span class="type">EmbedPersistFlags</span></a> include <tt class="literal">EMBED_PERSIST_COPY_PAGE</tt>. If <i class="parameter"><tt>persist</tt></i>'s
<a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a> has not finished downloading, this function will only return the
portion of data which has already been downloaded.
</p><p>
The document will be modified: it will only include absolute links and it
will be encoded as UTF-8.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>persist</tt></i> :</span></td><td> an <a href="EphyEmbedPersist.html" title="EphyEmbedPersist"><span class="type">EphyEmbedPersist</span></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> The contents of <i class="parameter"><tt>persist</tt></i>'s <a href="EphyEmbed.html" title="EphyEmbed"><span class="type">EphyEmbed</span></a>'s web page
</td></tr></tbody></table></div></div></div></div><table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle"><td align="left"><a accesskey="p" href="EphyEmbedSingle.html"><b>&lt;&lt; EphyEmbedSingle</b></a></td><td align="right"><a accesskey="n" href="epiphany-EphyEmbedFactory.html"><b>EphyEmbedFactory &gt;&gt;</b></a></td></tr></table></body></html>
