<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Dia Tutorial</title>
  <meta name="title" content="Dia Tutorial" />
  <meta name="subject" content="" />
  <meta name="description" content="Tutorial for the Dia diagramming application" />
  <meta name="author" content="Harry George" />
  <meta name="date" content="2000-10-06" />
  <meta name="validuntil" content="2000-12-31" />
  <meta name="robots" content="none" />
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#990099" alink="#FF0000">
  <table width="800">
    <tr>
      <td valign="top" width="100">&nbsp;</td>

      <td valign="top" width="600">
        <p align="center">&nbsp;</p>

        <div align="center">
          <img src="dialogo.jpg" alt="Dia Tutorial" />
        </div><br />
        <br />

        <p align="center"><font size="6">Dia Tutorial</font></p>

        <p align="center">&nbsp; <a href="http://www.lysator.liu.se/~alla/dia/">Dia</a>&nbsp; <a href="http://www.gtk.org/">GTK+</a></p>
      </td>

      <td valign="top" width="100">&nbsp;</td>
    </tr>

    <tr>
      <td valign="top" width="100"></td>

      <td valign="top" width="600">
        <h1><a name="toc">Table of Contents</a></h1>

        <ul>
          <li><a href="#L001">1 Abstract</a></li>

          <li><a href="#L002">2 Introduction</a></li>

          <li><a href="#L003">3 Installation</a></li>

          <li>
            <a href="#L004">4 Basics</a>

            <ul>
              <li><a href="#L005">4.1 Startup</a></li>

              <li><a href="#L006">4.2 New diagram</a></li>

              <li><a href="#L007">4.3 Draw an Organization Chart</a></li>

              <li><a href="#L008">4.4 Boxes and text</a></li>

              <li><a href="#L009">4.5 Lines</a></li>

              <li><a href="#L010">4.6 Saving</a></li>
            </ul>
          </li>

          <li>
            <a href="#L011">5 Advanced</a>

            <ul>
              <li>
                <a href="#L012">5.1 Layers</a>

                <ul>
                  <li><a href="#L013">5.1.1 Simple case</a></li>

                  <li><a href="#L014">5.1.2 Full layering</a></li>
                </ul>
              </li>

              <li><a href="#L015">5.2 Alignment</a></li>

              <li><a href="#L016">5.3 Selection</a></li>

              <li><a href="#L017">5.4 Shape Libraries</a></li>
            </ul>
          </li>
        </ul>

        <h1><a name="L001" id="L001">1 Abstract</a></h1>

        <p>This tutorial introduces <a href="http://www.lysator.liu.se/~alla/dia/">Dia</a>, the GTK-based GNU diagramming tool. We will install and configure the tool, then learn to use the basic shapes, then explore advanced features.</p>

        <h1><a name="L002" id="L002">2 Introduction</a></h1>From <a href="http://www.lysator.liu.se/~alla/dia/">Dia home</a>:

        <blockquote>
          <p>Welcome to Dia's homepage. Dia is a gtk+ based diagram creation program released under the GPL license.</p>

          <p>Dia is designed to be much like the commercial Windows program 'Visio'. It can be used to draw many different kinds of diagrams. It currently has special objects to help draw entity relationship diagrams, UML diagrams, flowcharts, network diagrams, and simple circuits. It is also possible to add support for new shapes by writing simple XML files, using a subset of SVG to draw the shape.</p>

          <p>It can load and save diagrams to a custom XML format (gzipped by default, to save space), can export diagrams to EPS or SVG formats and can print diagrams (including ones that span multiple pages).</p>
        </blockquote>

        <h1><a name="L003" id="L003">3 Installation</a></h1>

        <p>From the v0.86 INSTALL file:</p>
        <pre>
REQUIREMENTS:
=============

Dia needs Gtk+ at least version 1.2.0 installed.
It can be found at:

ftp://ftp.gtk.org/pub/gtk/v1.2/

Binaries availible at:
  ftp://ftp.gtk.org/pub/gtk/binary/devel/RPMS/
or
  ftp://ftp.gtk.org/pub/gtk/binary/devel/DEBIAN/

As of version 0.30 Dia also needs libxml (aka gnome-xml). I recommend you
get a fairly recent version, but not version 1.8.0.  It can be found here:
  ftp://ftp.gnome.org/pub/GNOME/stable/sources/gnome-xml/

As of version 0.40 Dia needs gdk_imlib, at least version 1.8.2.
It can be found here:
  ftp://ftp.gnome.org/pub/GNOME/stable/sources/imlib/

BUILDING:
=========

To build, run:

 ./configure
 make

</pre>

        <p>To build dia, you need to install (in order):</p>

        <ul>
          <li>From <a href="http://www.gtk.org/">GTK</a>:

            <ul>
              <li>glib</li>

              <li>gtk+</li>
            </ul>
          </li>

          <li>From: <a href="http://www.gnome.org">Gnome</a> (optional):

            <ul>
              <li>base libraries (installed in order per gnome instructions)</li>
            </ul>
          </li>

          <li>From <a href="http://www.lysator.liu.se/~alla/dia/">Dia</a>:

            <ul>
              <li>dia. If you installed gnome, configure with "--enable-gnome"</li>
            </ul>
          </li>
        </ul>

        <p>Each of these is an autoconf-style install from sources. Binaries are available for some platforms. If you have a recent Linux installation, you may have all the pieces already.</p>

        <h1><a name="L004" id="L004">4 Basics</a></h1>

        <h2><a name="L005" id="L005">4.1 Startup</a></h2>Once installed, the app is started with:
        <pre>
  dia
</pre>

        <p>This gives:</p>

        <p><img src="../basics/mainwin.png" alt="mainwin.png" /></p>

        <p>The first time up, you click File...Preferences and fill in personal choices. These are saved in your home dir as .dia/diarc. For example, I generally use the defaults except I make sure it is set to:</p>

        <ul>
          <li>User Interface...

            <ul>
              <li>Compress...no (so I can easily manipulate the UML models later. If I were worried about space, I'd use "yes")</li>
            </ul>
          </li>

          <li>Grid lines...

            <ul>
              <li>Visible...yes</li>

              <li>Snap to...yes</li>
            </ul>
          </li>
        </ul>

        <p>After clicking OK on the preferences, you can make a diagram.</p>

        <h2><a name="L006" id="L006">4.2 New diagram</a></h2>

        <p>Clicking File...New gives:</p>

        <p><img src="../basics/newwin.png" alt="newwin.png" /></p>

        <p>Right-clicking in that window gives a diagram-specific menu. From that select File...page setup:</p>

        <p><img src="../basics/newpage.png" alt="newpage.png" /></p>

        <p>Typically:</p>

        <ul>
          <li>Paper size: Use Letter for US printers.</li>

          <li>Orientation: Use portrait for most web pages, and landscape for viewfoils</li>

          <li>Margins: Leave as is. They resize for the paper size.</li>

          <li>Scaling: Leave as Scale...100. However, we'll come back to this later.</li>
        </ul>

        <p>After clicking OK, the page setup goes away and you are ready to populate the diagram.</p>

        <h2><a name="L007" id="L007">4.3 Draw an Organization Chart</a></h2>

        <p>An organization chart requires several boxes with text, some piped solid lines, and a few dashed lines. This can be done with the basic tools. So how do we use the basic tools?</p>

        <p>Notice the mainwindow's layout:</p>

        <p><img src="../basics/layout.png" alt="layout.png" /></p>

        <p>If you hold the mouse over an icon, a tooltip will appear. If you click an icon, the tool is activated and any clicks in the diagram will provide a copy of that tool. After clicking and placing one or more copies of a shape, click the pointer tool (top left arrow icon) before attempting to move things around. (Otherwise you will get lots of unexpected shapes.)</p>

        <p>The easiest way to work is to:</p>

        <ol type="a">
          <li>Select a shape</li>

          <li>Click approximately the right number of them onto your diagram.</li>

          <li>Label them (most shapes accept text labels).</li>

          <li>Move the shapes into place.</li>

          <li>Connect them with lines. Make sure the lines actually link to the shape handles.</li>

          <li>Label the lines as needed.</li>

          <li>Drag shapes and lines around as needed. Add connection points as needed to make tidy lines.</li>

          <li>Add/modify more shapes and lines as needed.</li>
        </ol>

        <p>For an org chart, we'll start with:</p>

        <p><img src="../basics/org1.png" alt="org1.png" /></p>

        <p>That looks terrible. The text doesn't line up with the boxes, and the font is tacky. How can we fix it?</p>

        <h2><a name="L008" id="L008">4.4 Boxes and text</a></h2>

        <p>We could use a box which knows about text, and resizes around text. The boxes in the Flowchart library (e.g., the square) can do this. We could even make our own shape which knows about text.</p>

        <p>But let's do it the hard way for now, with the basic box.</p>

        <p>First, get the font right. Select a text item. Right-click to get the menu, then Dialogs...Properties. Select Helvetica. Leave the size as is -- we can scale later. Do this for each text item.</p>

        <p>Next, carefully center the text in the box. Drag the box bigger if needed. Since the default is snap-to-grid, it will be difficult to align the text. So let's turn off snap-to-grid for a moment: With the pointer tool, click somewhere in the diagram (but not on a specific item), and type "g". Drag the text as needed, then type "g" again to toggle back to snap-to-grid.</p>

        <p>Ok, the text is the right font and is aligned nicely. Let's lock those box-and-text combinations together. Use the pointer to drag a selection box (dashed lines) around a box-and-text combo. Type "Ctl-G" to make them a group. Do this for each of the boxes.</p>

        <p>If you need to un-group a combo (e.g., to edit the text or realign), type "Ctl-U". For example, we notice misspellings, so we ungroup to fix those and then regroup.</p>

        <p>We now have:</p>

        <p><img src="../basics/org2.png" alt="org2.png" /></p>

        <h2><a name="L009" id="L009">4.5 Lines</a></h2>

        <p>Now we can draw some lines. We'll use the piped lines (90 degree turns). We draw them approximately from one item to the next, and then use the pointer to drag the ends directly to the handles at each end. The line end turns red when it locks in to a handle.</p>

        <p>We want to make the lines more interesting.</p>

        <p>In general, lines are controlled from the main window in several ways:</p>

        <ol type="a">
          <li>Line color, via the foreground/background icon.</li>

          <li>Line width, via the vertical lines of varying width</li>

          <li>Line style (e.g., dotted, dashed), via the middle of the bottom row.</li>

          <li>Line end arrows, via the left and right ends of the bottom row.</li>
        </ol>

        <p>All of these apply to future lines. You can also modify an already-drawn line. Select it using the pointer. Right-click to get the diagram menu. Select Dialogs...properties. This brings up a dialog for changing any of the line's properties.</p>

        <p>Thus, to fix our current lines: For each line, select the line, right-click to get the menu, select Dialogs...Properties, and change the line width from 0.1 to 0.2. Change the System Architect-to-Project Manager line to dotted line. But the wide dots look odd, so we change to dashed lines. The dashes are too long, so we make the dash interval 0.5. The net effect is:</p>

        <p><img src="../basics/org3.png" alt="org3.png" /></p>

        <p>Let's say the Systems Architect actually reports to the CIO (via a long chain of middle managers of course). We want to note that, but not over emphasize it. So we draw it in a thin line:</p>

        <p><img src="../basics/org4.png" alt="org4.png" /></p>

        <p>Ugh. We want that line to go around the outside. But there aren't enough middle bending points in the line to do it. So we select the line and the middle-click, to get the add-segment dialog. After adding a segment or two, we can drag the line to make a nice connection:</p>

        <p><img src="../basics/org5.png" alt="org5.png" /></p>

        <h2><a name="L010" id="L010">4.6 Saving</a></h2>

        <p>Ok, the diagram looks pretty good. Time to save it. First, we want to save the intellectual content, so we can later modify it. Second, we want to export it as a specific graphic format.</p>

        <p>To save it, right-click for the menu, then File...Save. Insert the name, e.g., <tt>org.dia</tt>, and click OK. If you are saving a whole series of variants on the same file and need to save each to a separate file, use File...Save As. The file is saved in an XML format which is mostly Scalable Vector graphics (SVG). NOTE: Since we set Compress to No in the user preferences, we can examine the file in a text editor. Go take a look.</p>

        <p>To export a usable image, select File...Export, and then enter the name with an appropriate extension, e.g., <tt>org.png</tt>. Look at the extensions list for candidates. If you don't have a preference, we suggest png (Portable Network Graphics).</p>

        <p>A simple export may make a rather large image. If you look closely at the diagram window, you can see blue lines representing printable pages. Your diagram probably extends over several pages. So if you print out the diagram to a physical printer, you will need to tape the pieces together. This is not much of a concern for HTML, where the browser can pan back and forth over a large image. However, even for HTML a large image can be awkward.</p>

        <p>So here is the recommendation:</p>

        <ul>
          <li>Build the diagram to any convenient size</li>

          <li>Save it as is</li>

          <li>Export it as is (full sized), for use in HTML links</li>

          <li>Export another copy for directly embedding in an HTML page.

            <p>Do this via File...Page setup...Scaling...Fit 1 by 1. This will show the scaling needed to fit the whole diagram on one page. But even that may be too large, so you can switch back to Scaling...Scale, and tweak the numbers until a convenient size is found for your HTML context.</p>
          </li>
        </ul>

        <h1><a name="L011" id="L011">5 Advanced</a></h1>

        <h2><a name="L012" id="L012">5.1 Layers</a></h2>

        <h3><a name="L013" id="L013">5.1.1 Simple case</a></h3>

        <p>Suppose we have four UML "class" objects, and want to draw a box around two of them. Doing so leaves the box on top and obstructs view of the two boxed classes. Putting the box in the background solves the problem.</p>

        <p>Putting an object in the background is done by first selecting it, and then:</p>

        <ol type="a">
          <li>Long way: Right-click for menu...Objects...Send to back</li>

          <li>Shortcut: Ctl-B</li>
        </ol>

        <p><img src="../advanced/layers1.png" alt="../advanced/layers1.png" /></p>

        <h3><a name="L014" id="L014">5.1.2 Full layering</a></h3>

        <p>Now suppose we have a common background (e.g., project logo) and want to build our diagram on top of that. It is no longer convenient to do this object by object. Instead we want to establish the layers in advance and use them over time.</p>

        <p>If you are familiar with Gimp layers, you are in business -- it is the same mechanism. Otherwise, listen carefully.</p>

        <p>When you start a new diagram, after doing page setup, select right-click...Objects...layers. This gives:</p>

        <p><img src="../advanced/layer_dialog.png" alt="../advanced/layer_dialog.png" /></p>

        <p>Click on the "new layer" icon (page with corner turned down), and you will get a "New layer". It is automatically placed above the Background layer. Click on the layer's name to select it. Once selected, you can move it relative to the other layers using the up and down arrows. Of course you should leave the Background layer at the bottom of the stack.</p>

        <p>Clicking on the eyeball next to a layer toggles whether or not it is visible in the diagram. Generally, you build each layer separately, with just it visible, but turn on all layers occasionally to check alignment.</p>

        <p>For our example, we put a text object which says "DRAFT" on the background layer. We make this text object grey using the color selector. Then we go to the new layer and make a diagram. Making both layers visible gives:</p>

        <p><img src="../advanced/layers2.png" alt="../advanced/layers2.png" /></p>

        <h2><a name="L015" id="L015">5.2 Alignment</a></h2>

        <p>Suppose we have several objects roughly aligned:</p>

        <p><img src="../advanced/align1.png" alt="../advanced/align1.png" /></p>

        <p>We could very carefully drag them around to get them aligned. But a better approach is to use the alignment functions. Select the almost-vertically-aligned circles. Right-click to get the menu, then...Objects...Horizontal...center. This moves the objects horizontally until their centers are aligned vertically.</p>

        <p>Yes, it is a bit confusing: To align on a vertical axis, you have to select horizontal, because that is the axis on which the movement takes place.</p>

        <p>Similarly, to align objects along a single horizontal axis, you select Objects...Vertical...center. After aligning groups vertically and horizontally, we get:</p>

        <p><img src="../advanced/align2.png" alt="../advanced/align2.png" /></p>

        <h2><a name="L016" id="L016">5.3 Selection</a></h2>

        <p>The obvious ways to select are:</p>

        <ol type="a">
          <li>With pointer, click on an item</li>

          <li>With pointer, and shift-button down, click on 1 or more items</li>

          <li>With pointer, drag dashed-line box around the items to be selected</li>
        </ol>

        <p>But you might want something fancier. In that case, Right-click to get the menu and then Select.... This gives the dialog:</p>

        <p><img src="../advanced/select_dialog.png" alt="../advanced/select_dialog.png" /></p>

        <p>For example, applied to this diagram, after selecting the "A" object:</p>

        <p><img src="../advanced/select1.png" alt="../advanced/select1.png" /></p>

        <ul>
          <li>All: All boxes and lines are selected.</li>

          <li>None: No boxes or lines are selected (e.g., A is also unselected)</li>

          <li>Invert: Everything is selected <i>except</i> A</li>

          <li>Connected: A and L1 and L3 are selected, because L1 and L2 are directly connected to A.</li>

          <li>Transitive: A,B,C,D, and L1,L2,L3 are selected, because by following connections, you can reach each of these. E is left out because it cannot be reached.</li>

          <li>Same Type: A,B,C,D,E are selected, because they are the same type of Dia object (i.e., all UML class objects).</li>
        </ul>

        <p>NOTE: If I ever figure out what the check boxes do, I'll let you know.</p>

        <h2><a name="L017" id="L017">5.4 Shape Libraries</a></h2>

        <p>Dia comes with several shape libraries. It is also designed to allow you to add your own.</p>

        <p>These libraries are of course domain-specific, so their use should be described in other contexts (e.g., UML should be discussed in a tutorial on software engineering). Here we will concentrate on the mechanics of using the shape libraries.</p>

        <p>The libraries are saved in the share dir for wherever dia is installed. For example if <tt>which dia</tt> gives <tt>/usr/bin/dia</tt>, then we want to look at <tt>/usr/share.dia</tt>:</p>
        <pre>
/usr/share/dia/
  dia_logo.png         Dia's logo
  shapes/
    Flowchart/         objects, in paired files (icon and shape)
      magdisk.xpm      icon
      magdisk.shape    shape description
      ...
  sheets/      object descriptions in various languages (XML)
    ER.sheet
    Flowchart.sheet
    UML.sheet
    ...
</pre>

        <p>For example, if we are interested in the Flowchart library, and specifically in the magnetic disk object, we find the magdisk.shape file:</p>
        <pre>
&lt;?xml version="1.0"?&gt;

&lt;shape xmlns="http://www.daa.com.au/~james/dia-shape-ns"
       xmlns:svg="http://www.w3.org/TR/2000/03/WD-SVG-20000303/DTD/svg-20000303-stylable.dtd"&gt;
  &lt;name&gt;Flowchart - Magnetic Disk&lt;/name&gt;
  &lt;description&gt;Magnetic Disk&lt;/description&gt;
  &lt;icon&gt;magdisk.xpm&lt;/icon&gt;
  &lt;connections&gt;
    &lt;point x="0"   y="2"/&gt;
    &lt;point x="2.5" y="0.4375"/&gt;
    &lt;point x="5"   y="0"/&gt;
    &lt;point x="7.5" y="0.4375"/&gt;
    &lt;point x="10"  y="0"/&gt;
    &lt;point x="0"   y="2.5"/&gt;
    &lt;point x="0"   y="7.5"/&gt;
    &lt;point x="0"   y="5"/&gt;
    &lt;point x="0"   y="10"/&gt;
    &lt;point x="10"  y="2.5"/&gt;
    &lt;point x="10"  y="5"/&gt;
    &lt;point x="10"  y="7.5"/&gt;
    &lt;point x="10"  y="10"/&gt;
    &lt;point x="2.5" y="11.5625"/&gt;
    &lt;point x="5"   y="12"/&gt;
    &lt;point x="7.5" y="11.5625"/&gt;
  &lt;/connections&gt;
  &lt;textbox x1="0" y1="4" x2="10" y2="10"/&gt;
  &lt;svg:svg width="10" height="12"&gt;
    &lt;svg:path d="M 0,2 c 2,-1.5 3,-2 5,-2 s 3,0.5 5,2 v 8
                 c -2,1.5 -3,2 -5,2 s -3,-0.5 -5,-2 v -8 z
                 M 0,2 c 2,1.5 3,2 5,2 s 3,-0.5 5,-2" style="fill: default"/&gt;
  &lt;/svg:svg&gt;
&lt;/shape&gt;
</pre>

        <p>Notice:</p>

        <ol type="a">
          <li>The name value maps to the description lines in the Flowchart.sheet file
            <pre>
    &lt;object name="Flowchart - Magnetic Disk"&gt;
      &lt;description xml:lang="no"&gt;Magnetdisk&lt;/description&gt;
      &lt;description xml:lang="fr"&gt;Disque Magnétique&lt;/description&gt;
      &lt;description xml:lang="de"&gt;Magnetdisk&lt;/description&gt;
      &lt;description&gt;Magnetic Disk&lt;/description&gt;
    &lt;/object&gt;
</pre>

            <p>Thus, we get language-specific tooltips.</p>
          </li>

          <li>The icon value is the file name of the icon shown on the main window.</li>

          <li>The shape is described by a Scalable Vector Graphics (svg) width/height and path.</li>

          <li>The location of connection points is given in the context of the width and height. You can add other connection points if you wish.</li>

          <li>The associated text field is also defined in the context of the width and height. Originally, it is under the magdisk object. You could move that to the middle of the magdisk object if you wished.</li>
        </ol>

        <p>You can make your own sheets/shapes by following the above patterns.</p>

        <p>Some shape libraries (e.g., UML) have associated processing and therefore are not just .shape files. To make your own library-with-processing requires going into the C code, and that is beyond the scope of this tutorial. (Perhaps embedded python will be supported in the future, simplifying even this adventure.)</p>
      </td>

      <td valign="top" width="100"></td>
    </tr>

    <tr>
      <td valign="top" width="100">&nbsp;</td>

      <td valign="top" width="600">
        <hr />
        Creator: <a href="mailto:hgg9140@seanet.com">Harry George</a><br />
        Updated/Created: 2000-10-06
      </td>

      <td valign="top" width="100">&nbsp;</td>
    </tr>
  </table>
</body>
</html>
