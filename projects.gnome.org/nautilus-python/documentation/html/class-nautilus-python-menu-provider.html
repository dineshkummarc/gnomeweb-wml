<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>nautilus.MenuProvider</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="nautilus-python Reference Manual"><link rel="up" href="nautilus-python-provider-reference.html" title="Provider Interfaces"><link rel="prev" href="class-nautilus-python-location-widget-provider.html" title="nautilus.LocationWidgetProvider"><link rel="next" href="class-nautilus-python-property-page-provider.html" title="nautilus.PropertyPageProvider"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">nautilus.MenuProvider</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="class-nautilus-python-location-widget-provider.html">Prev</a> </td><th width="60%" align="center">Provider Interfaces</th><td width="20%" align="right"> <a accesskey="n" href="class-nautilus-python-property-page-provider.html">Next</a></td></tr></table><hr></div><div class="refentry" title="nautilus.MenuProvider"><a name="class-nautilus-python-menu-provider"></a><div class="titlepage"></div><div class="refnamediv"><h2>nautilus.MenuProvider</h2><p>nautilus.MenuProvider — nautilus.MenuProvider Reference</p></div><div class="refsect1" title="Synopsis"><a name="id2601444"></a><h2>Synopsis</h2><table bgcolor="#D0E0F0" width="100%"><tr><td><pre class="classsynopsis">class <span class="ooclass"><span class="classname">nautilus.MenuProvider</span></span>:
<code class="methodsynopsis">    def <span class="methodname"><a class="link" href="class-nautilus-python-menu-provider.html#method-nautilus-python-menu-provider--get-file-items" title="nautilus.MenuProvider.get_file_items">get_file_items</a></span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>files</code></strong></span></span>)</code><br><code class="methodsynopsis">    def <span class="methodname"><a class="link" href="class-nautilus-python-menu-provider.html#method-nautilus-python-menu-provider--get-file-items-full" title="nautilus.MenuProvider.get_file_items_full">get_file_items_full</a></span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>files</code></strong></span></span>)</code><br><code class="methodsynopsis">    def <span class="methodname"><a class="link" href="class-nautilus-python-menu-provider.html#method-nautilus-python-menu-provider--get-background-items" title="nautilus.MenuProvider.get_background_items">get_background_items</a></span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code><br><code class="methodsynopsis">    def <span class="methodname"><a class="link" href="class-nautilus-python-menu-provider.html#method-nautilus-python-menu-provider--get-background-items-full" title="nautilus.MenuProvider.get_background_items_full">get_background_items_full</a></span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code><br><code class="methodsynopsis">    def <span class="methodname"><a class="link" href="class-nautilus-python-menu-provider.html#method-nautilus-python-menu-provider--get-toolbar-items" title="nautilus.MenuProvider.get_toolbar_items">get_toolbar_items</a></span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code><br><code class="methodsynopsis">    def <span class="methodname"><a class="link" href="class-nautilus-python-menu-provider.html#method-nautilus-python-menu-provider--get-toolbar-items-full" title="nautilus.MenuProvider.get_toolbar_items_full">get_toolbar_items_full</a></span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code><br><code class="methodsynopsis">    def <span class="methodname"><a class="link" href="class-nautilus-python-menu-provider.html#method-nautilus-python-menu-provider--emit-items-updated-signal" title="nautilus.MenuProvider.emit_items_updated_signal">emit_items_updated_signal</a></span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>)</code><br></pre></td></tr></table></div><div class="refsect1" title="Description"><a name="description-menu-provider"></a><h2>Description</h2><p>
        If subclassed, Nautilus will request a list of <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects, 
        which are then attached to various menus.  Nautilus expects at least one of
        the following methods to be defined (or their *_full variants): get_file_items, 
        get_background_items, or get_toolbar_items.
        </p><div class="example"><a name="id2667006"></a><p class="title"><b>Example 5. nautilus.MenuProvider Example</b></p><div class="example-contents"><pre class="programlisting">
import os
import urllib

import gtk
import nautilus
import gconf

TERMINAL_KEY = '/desktop/gnome/applications/terminal/exec'

class OpenTerminalExtension(nautilus.MenuProvider):
    def __init__(self):
        self.client = gconf.client_get_default()
        
    def _open_terminal(self, file):
        filename = urllib.unquote(file.get_uri()[7:])
        terminal = self.client.get_string(TERMINAL_KEY)

        os.chdir(filename)
        os.system('%s &amp;' % terminal)
        
    def menu_activate_cb(self, menu, file):
        self._open_terminal(file)
        
    def menu_background_activate_cb(self, menu, file): 
        self._open_terminal(file)
       
    def get_file_items(self, window, files):
        if len(files) != 1:
            return
        
        file = files[0]
        if not file.is_directory() or file.get_uri_scheme() != 'file':
            return
        
        item = nautilus.MenuItem('NautilusPython::openterminal_file_item',
                                 'Open Terminal' ,
                                 'Open Terminal In %s' % file.get_name())
        item.connect('activate', self.menu_activate_cb, file)
        return item,

    def get_background_items(self, window, file):
        item = nautilus.MenuItem('NautilusPython::openterminal_item',
                                 'Open Terminal Here',
                                 'Open Terminal In This Directory')
        item.connect('activate', self.menu_background_activate_cb, file)
        return item,
    </pre></div></div><br class="example-break"><div class="refsect1" title="Signals"><a name="id2621924"></a><h2>Signals</h2><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><a class="link" href="class-nautilus-python-menu-provider.html#signal-nautilus-python-menu-provider--items-updated" title='The "items-updated" nautilus.MenuProvider Signal'>"items-updated"</a></span></p></td><td><code class="methodsynopsis">    def <span class="methodname">callback</span>()</code></td></tr></tbody></table></div></div><div class="refsect1" title="Passive Methods"><a name="id2656676"></a><h2>Passive Methods</h2><div class="refsect2" title="nautilus.MenuProvider.get_file_items"><a name="method-nautilus-python-menu-provider--get-file-items"></a><h3>nautilus.MenuProvider.get_file_items</h3><pre class="programlisting"><code class="methodsynopsis">    def <span class="methodname">get_file_items</span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>files</code></strong></span></span>)</code></pre><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><strong class="parameter"><code>window</code></strong> :</span></p></td><td>the current <code class="classname">gtk.Window</code> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>menu</code></strong> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-file-info.html" title="nautilus.FileInfo"><code class="classname">nautilus.FileInfo</code></a> objects.</td></tr><tr><td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects</td></tr></tbody></table><p>
            The <code class="methodname">get_file_items</code>() method returns a list of
            <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects.
          </p></div><div class="refsect2" title="nautilus.MenuProvider.get_file_items_full"><a name="method-nautilus-python-menu-provider--get-file-items-full"></a><h3>nautilus.MenuProvider.get_file_items_full</h3><pre class="programlisting"><code class="methodsynopsis">    def <span class="methodname">get_file_items_full</span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>files</code></strong></span></span>)</code></pre><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><strong class="parameter"><code>provider</code></strong> :</span></p></td><td>the current <a class="link" href="class-nautilus-python-menu-provider.html" title="nautilus.MenuProvider"><code class="classname">nautilus.MenuProvider</code></a> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>window</code></strong> :</span></p></td><td>the current <code class="classname">gtk.Window</code> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>files</code></strong> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-file-info.html" title="nautilus.FileInfo"><code class="classname">nautilus.FileInfo</code></a> objects.</td></tr><tr><td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects</td></tr></tbody></table><p>
            The <code class="methodname">get_file_items_full</code>() method returns a list of
            <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code> objects</a>.
          </p><p>
            This method was created in order to allow extension writers to call the 
            nautilus.MenuProvider.emit_items_updated_signal, which must
            be passed the current provider instance.
          </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            This method was introduced in nautilus-python 0.7.0.
          </div></div><div class="refsect2" title="nautilus.MenuProvider.get_background_items"><a name="method-nautilus-python-menu-provider--get-background-items"></a><h3>nautilus.MenuProvider.get_background_items</h3><pre class="programlisting"><code class="methodsynopsis">    def <span class="methodname">get_background_items</span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code></pre><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><strong class="parameter"><code>window</code></strong> :</span></p></td><td>the current <code class="classname">gtk.Window</code> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>folder</code></strong> :</span></p></td><td>the current folder, as a <a class="link" href="class-nautilus-python-file-info.html" title="nautilus.FileInfo"><code class="classname">nautilus.FileInfo</code></a> object.</td></tr><tr><td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects</td></tr></tbody></table><p>
            The <code class="methodname">get_background_items</code>() method returns a list of
            <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code> objects</a>.
          </p></div><div class="refsect2" title="nautilus.MenuProvider.get_background_items_full"><a name="method-nautilus-python-menu-provider--get-background-items-full"></a><h3>nautilus.MenuProvider.get_background_items_full</h3><pre class="programlisting"><code class="methodsynopsis">    def <span class="methodname">get_background_items_full</span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code></pre><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><strong class="parameter"><code>provider</code></strong> :</span></p></td><td>the current <a class="link" href="class-nautilus-python-menu-provider.html" title="nautilus.MenuProvider"><code class="classname">nautilus.MenuProvider</code></a> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>window</code></strong> :</span></p></td><td>the current <code class="classname">gtk.Window</code> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>folder</code></strong> :</span></p></td><td>the current folder, as a <a class="link" href="class-nautilus-python-file-info.html" title="nautilus.FileInfo"><code class="classname">nautilus.FileInfo</code></a> object.</td></tr><tr><td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects</td></tr></tbody></table><p>
            The <code class="methodname">get_background_items_full</code>() method returns a list of
            <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code> objects</a>.
          </p><p>
            This method was created in order to allow extension writers to call the 
            nautilus.MenuProvider.emit_items_updated_signal, which must
            be passed the current provider instance.
          </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            This method was introduced in nautilus-python 0.7.0.
          </div></div><div class="refsect2" title="nautilus.MenuProvider.get_toolbar_items"><a name="method-nautilus-python-menu-provider--get-toolbar-items"></a><h3>nautilus.MenuProvider.get_toolbar_items</h3><pre class="programlisting"><code class="methodsynopsis">    def <span class="methodname">get_toolbar_items</span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code></pre><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><strong class="parameter"><code>window</code></strong> :</span></p></td><td>the current <code class="classname">gtk.Window</code> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>folder</code></strong> :</span></p></td><td>the current folder, as a <a class="link" href="class-nautilus-python-file-info.html" title="nautilus.FileInfo"><code class="classname">nautilus.FileInfo</code></a> object.</td></tr><tr><td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects</td></tr></tbody></table><p>
            The <code class="methodname">get_toolbar_items</code>() method returns a list of
            <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code> objects</a>.
          </p></div><div class="refsect2" title="nautilus.MenuProvider.get_toolbar_items_full"><a name="method-nautilus-python-menu-provider--get-toolbar-items-full"></a><h3>nautilus.MenuProvider.get_toolbar_items_full</h3><pre class="programlisting"><code class="methodsynopsis">    def <span class="methodname">get_toolbar_items_full</span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>window</code></strong></span></span>, <span class="methodparam"><span class="parameter"><strong class="parameter"><code>folder</code></strong></span></span>)</code></pre><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><strong class="parameter"><code>provider</code></strong> :</span></p></td><td>the current <a class="link" href="class-nautilus-python-menu-provider.html" title="nautilus.MenuProvider"><code class="classname">nautilus.MenuProvider</code></a> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>window</code></strong> :</span></p></td><td>the current <code class="classname">gtk.Window</code> instance</td></tr><tr><td><p><span class="term"><strong class="parameter"><code>folder</code></strong> :</span></p></td><td>the current folder, as a <a class="link" href="class-nautilus-python-file-info.html" title="nautilus.FileInfo"><code class="classname">nautilus.FileInfo</code></a> object.</td></tr><tr><td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td><td>a list of <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code></a> objects</td></tr></tbody></table><p>
            The <code class="methodname">get_toolbar_items_full</code>() method returns a list of
            <a class="link" href="class-nautilus-python-menu-item.html" title="nautilus.MenuItem"><code class="classname">nautilus.MenuItem</code> objects</a>.
          </p><p>
            This method was created in order to allow extension writers to call the 
            nautilus.MenuProvider.emit_items_updated_signal, which must
            be passed the current provider instance.
          </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            This method was introduced in nautilus-python 0.7.0.
          </div></div></div><div class="refsect1" title="Active Methods"><a name="id2604283"></a><h2>Active Methods</h2><div class="refsect2" title="nautilus.MenuProvider.emit_items_updated_signal"><a name="method-nautilus-python-menu-provider--emit-items-updated-signal"></a><h3>nautilus.MenuProvider.emit_items_updated_signal</h3><pre class="programlisting"><code class="methodsynopsis">    def <span class="methodname">emit_items_updated_signal</span>(<span class="methodparam"><span class="parameter"><strong class="parameter"><code>provider</code></strong></span></span>)</code></pre><table border="0" width="100%" bgcolor="#FFECCE"><col align="left" valign="top" width="0*"><tbody><tr><td><p><span class="term"><strong class="parameter"><code>provider</code></strong> :</span></p></td><td>the current <a class="link" href="class-nautilus-python-menu-provider.html" title="nautilus.MenuProvider"><code class="classname">nautilus.MenuProvider</code></a> instance</td></tr></tbody></table><p>
            Emits the "<a class="link" href="class-nautilus-python-menu-provider.html#signal-nautilus-python-menu-provider--items-updated" title='The "items-updated" nautilus.MenuProvider Signal'>items-updated</a>" signal.
          </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            This method was introduced in nautilus-python 0.7.0.
          </div></div></div><div class="refsect1" title="Signal Details"><a name="id2624347"></a><h2>Signal Details</h2><div class="refsect2" title='The "items-updated" nautilus.MenuProvider Signal'><a name="signal-nautilus-python-menu-provider--items-updated"></a><h3>The "items-updated" nautilus.MenuProvider Signal</h3><p>
      Emits the "<a class="link" href="class-nautilus-python-menu-provider.html#signal-nautilus-python-menu-provider--items-updated" title='The "items-updated" nautilus.MenuProvider Signal'>items-updated</a>" signal.
    </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="class-nautilus-python-location-widget-provider.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="nautilus-python-provider-reference.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="class-nautilus-python-property-page-provider.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">nautilus.LocationWidgetProvider </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> nautilus.PropertyPageProvider</td></tr></table></div></body></html>
