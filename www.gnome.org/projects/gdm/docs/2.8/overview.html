<html xmlns:set="http://exslt.org/sets">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Overview</title>
<link rel="previous" href="preface.html" title="Terms and Conventions Used in This Manual">
<link rel="next" href="configuration.html" title="Configuration">
<link rel="top" href="gdm.html" title="Gnome Display Manager Reference Manual">
<style type="text/css">

html { height: 100%; }
body {
  margin: 0px; padding: 12px;
  background-color: #f9f9f6;
  min-height: 100%;
  direction: ltr;
}
div, p, pre, blockquote { margin: 0; padding: 0; }
p img { vertical-align: middle; }
sub { font-size: 0.83em; }
sub sub { font-size: 1em; }
sup { font-size: 0.83em; }
sup sup { font-size: 1em; }
table { border-collapse: collapse; }
table.table-pgwide { width: 100%; }
td { vertical-align: top; }
td { padding: 0.2em 0.83em 0.2em 0.83em; }
th { padding: 0 0.83em 0 0.83em; }
tr.tr-shade {
  background-color: #f9f9f6;
}
td.td-colsep { border-right: solid 1px; }
td.td-rowsep { border-bottom: solid 1px; }
thead { border-top: solid 2px; border-bottom: solid 2px; }
tfoot { border-top: solid 2px; border-bottom: solid 2px; }
div.body {
  padding: 1em;
  max-width: 60em;
  background-color: #ffffff;
  border: solid 1px #e0e0df;
}
div.body-sidebar {
  
  margin-right: 13em;
}
div.division div.division { margin-top: 1.72em; }
div.division div.division div.division { margin-top: 1.44em; }
div.header {
  margin: 0;
  color: #3f3f3f;
  border-bottom: solid 1px #e0e0df;
}
h1, h2, h3, h4, h5, h6, h7 {
  margin: 0; padding: 0;
  color: #3f3f3f;
}
h1.title { font-size: 1.72em; }
h2.title { font-size: 1.44em; }
h3.title { font-size: 1.2em; }
h4.title, h5.title, h6.title, h7.title { font-size: 1em; }
.block { margin-top: 1em; }
.block .block-first { margin-top: 0; }
.block-indent {
  
  margin-left: 1.72em;
  
  margin-right: 1em;
}
.block-indent .block-indent { margin-left: 0em; margin-right: 0em; }
td .block-indent  { margin-left: 0em; margin-right: 0em; }
dd .block-indent  { margin-left: 0em; margin-right: 0em; }
.block-verbatim { white-space: pre; }
div.title {
  margin-bottom: 0.2em;
  font-weight: bold;
  color: #3f3f3f;
}
div.title-formal { padding-left: 0.2em; padding-right: 0.2em; }
div.title-formal .label { font-weight: normal; }
a {
  color: #1f609f;
  text-decoration: none;
}
a:hover { text-decoration: underline; }
a:visited { color: #9f1f6f; }
ul, ol, dl { margin: 0; padding: 0; }
li {
  margin-top: 1em;
  
  margin-left: 2.4em;
  
  padding: 0;
}
li.li-first { margin-top: 0; }
dt { margin: 1em 0 0 0; }
dt.dt-first { margin: 0; }
dd {
  
  margin-left: 1.72em;
  margin-top: 0.5em;
}
dl.dl-compact dt { margin-top: 0; }
dl.dl-compact dd { margin-top: 0; margin-bottom: 0; }


ul.linktrail {
  display: block;
  margin: 0.2em 0 0 0;
  
  text-align: right;
}
li.linktrail { display: inline; margin: 0; padding: 0; }

li.linktrail::before {
  content: '  /  ';
  color: #3f3f3f;
}

li.linktrail-first::before, li.linktrail-only::before { content: ''; }


div.navbar {
  padding: 0.5em 1em 0.5em 1em;
  max-width: 60em;
  background-color: #ffffff;
  border: solid 1px #e0e0df;
}
div.navbar-top { margin-bottom: 1em; }
div.navbar-bottom { margin-top: 1em; clear: both; }
div.navbar img { border: 0; vertical-align: -0.4em; }
table.navbar { width: 100%; margin: 0; border: none; }
table.navbar td { padding: 0; border: none; }
td.navbar-next {
  
  text-align: right;
}
a.navbar-prev::before {
  
  content: '◀  ';
  color: #3f3f3f;
}
a.navbar-next::after {
  
  content: '  ▶';
  color: #3f3f3f;
}


div.sidebar {
  
  float: right;
  padding: 0; margin: 0; width: 12em;
}
div.sidenav {
  padding: 0.5em 1em 0 1em;
  background-color: #ffffff;
  border: solid 1px #e0e0df;
}
div.sidenav div.autotoc {
  background-color: #ffffff;
  border: none; padding: 0; margin: 0;
}
div.sidenav div.autotoc div.autotoc { margin-top: 0.5em; }
div.sidenav div.autotoc li { margin-bottom: 0.5em; }
div.sidenav div.autotoc div.autotoc div.autotoc {
  
  margin-left: 1em;
  margin-top: 0;
}
div.sidenav div.autotoc div.autotoc div.autotoc li { margin-bottom: 0; }


div.autotoc {
  
  display: table;
  margin-top: 1em;
  
  margin-left: 1.72em;
  padding: 0.5em 1em 0.5em 1em;
  background-color: #f0f9ff;
  border: solid 1px #c0c9ff;
}
div.autotoc ul { margin: 0; padding: 0; }
div.autotoc li { list-style-type: none; margin: 0; }
div.autotoc div.autotoc-title { margin-bottom: 0.5em; }
div.autotoc div.autotoc { border: none; padding: 0; margin-top: 0; margin-bottom: 0.5em; }
div.autotoc div.autotoc div.autotoc { margin-bottom: 0; }


span.bibliolabel {
  color: #3f3f3f;
}


div.admonition {
  padding: 0.5em 1em 0.5em 1em;
  
  padding-left: 60px;
  min-height: 48px;
  border: solid 1px #e0e0df;
  background-color: #fffff0;
  
  background-position: 6px 0.5em;
  background-repeat: no-repeat;
}
div.caution {
  background-image: url("admon-caution.png");
}
div.important {
  background-image: url("admon-important.png");
}
div.note {
  background-image: url("admon-note.png");
}
div.note-bug {
  background-image: url("admon-bug.png");
}
div.tip {
  background-image: url("admon-tip.png");
}
div.warning {
  background-image: url("admon-warning.png");
}
div.blockquote {
  
  background-image: url('../../../data/icons/yelp-watermark-blockquote-201C.png');
  background-repeat: no-repeat;
  
  background-position: top left;
  padding: 0.5em;
  
  padding-left: 4em;
}
div.attribution {
  margin-top: 0.5em;
  color: #3f3f3f;
}
div.attribution::before {
  
  content: '― ';
}
div.epigraph {
  
  text-align: right;
  
  margin-left: 20%;
  
  margin-right: 0;
  color: #3f3f3f;
}
div.figure, div.informalfigure {
  
  display: table;
  padding: 0.5em;
  background-color: #f9f9f6;
  border: solid 1px #e0e0df;
}
div.figure-inner, div.informalfigure-inner {
  padding: 0.5em;
  background-color: #ffffff;
  border: solid 1px #e0e0df;
}
div.caption { margin-top: 0.5em; }
div.programlisting {
  padding: 0.5em;
  
  background-color: #f9f9f6;
  border: solid 1px #e0e0df;
}
div.screen {
  padding: 0.5em;
  
  background-color: #f9f9f6;
  border: solid 1px #e0e0df;
}
div.screen .prompt {
  color: #3f3f3f;
}
div.screen .userinput {
  font-weight: bold;
  color: #3f3f3f;
}
pre.linenumbering {
  color: #3f3f3f;
  margin: 0;
  
  padding-right: 1em;
  
  float: left;
  
  text-align: right;
}



dl.index dt { margin-top: 0; }
dl.index dd { margin-top: 0; margin-bottom: 0; }
dl.indexdiv dt { margin-top: 0; }
dl.indexdiv dd { margin-top: 0; margin-bottom: 0; }
dl.setindex dt { margin-top: 0; }
dl.setindex dd { margin-top: 0; margin-bottom: 0; }
div.list div.title-formal span.title {
  border-bottom: solid 1px #e0e0df;
}
div.simplelist {
  
  margin-left: 1.72em;
}
div.simplelist table { margin-left: 0; border: none; }
div.simplelist td {
  padding: 0.5em;
  border-left: solid 1px #e0e0df;
}
div.simplelist td.td-first {
  
  padding-left: 0;
  
  border-left: 0;
}
div.synopsis {
  padding: 0.5em;
  
  background-color: #f9f9f6;
  border-top: solid 2px #c0c9ff;
  border-bottom: solid 2px #c0c9ff;
}
div.synopsis div.synopsis {
  padding: 0;
  border: none;
}
div.synopsis div.block { margin-top: 0.2em; }
div.synopsis div.block-first { margin-top: 0; }


span.accel { text-decoration: underline; }
span.acronym { font-family: sans-serif; }
span.application { font-style: italic; }
span.classname, span.exceptionname, span.interfacename { font-family: monospace; }
span.code {
  font-family: monospace;
  border: solid 1px #e0e0df;
  
  padding-left: 0.2em;
  padding-right: 0.2em;
}
pre span.code { border: none; padding: 0; }
span.command {
  font-family: monospace;
  border: solid 1px #e0e0df;
  
  padding-left: 0.2em;
  padding-right: 0.2em;
}
pre span.command { border: none; padding: 0; }
span.computeroutput { font-family: monospace; }

span.constant { font-family: monospace; }
span.database { font-family: monospace; }
span.email { font-family: monospace; }
span.emphasis { font-style: italic; }
span.emphasis-bold { font-style: normal; font-weight: bold; }
span.envar { font-family: monospace; }

span.filename { font-family: monospace; }
span.firstterm { font-style: italic; }
span.foreignphrase { font-style: italic; }
span.function { font-family: monospace; }

dt.glossterm span.glossterm { font-style: normal; }


span.glossterm { font-style: italic; }

span.guibutton, span.guilabel, span.guimenu, span.guimenuitem, span.guisubmenu, span.interface {
  font-weight: bold;
  color: #3f3f3f;
}
span.keycap {
  font-weight: bold;
  color: #3f3f3f;
}
span.lineannotation { font-style: italic; }
span.literal { font-family: monospace; }
span.markup  { font-family: monospace; }
span.medialabel { font-style: italic; }
span.methodname { font-family: monospace; }
span.ooclass, span.ooexception, span.oointerface { font-family: monospace; }
span.option { font-family: monospace; }
span.parameter { font-family: monospace; }
span.paramdef span.parameter { font-style: italic; }
span.prompt { font-family: monospace; }
span.property { font-family: monospace; }
span.replaceable  { font-style: italic; }
span.returnvalue { font-family: monospace; }
span.sgmltag { font-family: monospace; }
span.structfield, span.structname { font-family: monospace; }
span.symbol { font-family: monospace; }
span.systemitem { font-family: monospace; }
span.token { font-family: monospace; }
span.type { font-family: monospace; }
span.uri { font-family: monospace; }
span.userinput { font-family: monospace; }
span.varname { font-family: monospace; }
span.wordasword { font-style: italic; }



div.footnotes { font-style: italic; font-size: 0.8em; }
div.footnote { margin-top: 1.44em; }
span.footnote-number { display: inline; padding-right: 0.83em; }
span.footnote-number + p { display: inline; }
a.footnote { text-decoration: none; font-size: 0.8em; }
a.footnote-ref { text-decoration: none; }

span.co {
  margin-left: 0.2em; margin-right: 0.2em;
  padding-left: 0.4em; padding-right: 0.4em;
  border: solid 1px #000000;
  -moz-border-radius: 8px;
  background-color: #000000;
  color: #FFFFFF;
  font-size: 8px;
}
span.co:hover {
  border-color: #333333;
  background-color: #333333;
  color: #FFFFFF;
}
span.co a { text-decoration: none; }
span.co a:hover { text-decoration: none; }

div.cmdsynopsis { font-family: monospace; }

dt.question { margin-left: 0em; }
dt.question div.label { float: left; }
dd + dt.question { margin-top: 1em; }
dd.answer {
  margin-top: 1em;
  margin-left: 2em;
  margin-right: 1em;
}
dd.answer div.label { float: left; }
</style>
</head>
<body>
<div class="navbar navbar-top"><table class="navbar"><tr>
<td class="navbar-prev"><a class="navbar-prev" href="preface.html" title="Terms and Conventions Used in This Manual">Terms and Conventions Used in This Manual</a></td>
<td class="navbar-next"><a class="navbar-next" href="configuration.html" title="Configuration">Configuration</a></td>
</tr></table></div>
<div class="sidebar"><div class="sidenav"><div class="autotoc"><ul>
<li><a href="gdm-info.html" title="About This Document">About This Document</a></li>
<li>
<a class="xref" href="gdm.html" title="Gnome Display Manager Reference Manual">Gnome Display Manager Reference Manual</a><div class="autotoc"><ul>
<li><a class="xref" href="preface.html" title="Terms and Conventions Used in This Manual">Terms and Conventions Used in This Manual</a></li>
<li>Overview</li>
<li><a class="xref" href="configuration.html" title="Configuration">Configuration</a></li>
<li><a class="xref" href="controlling.html" title="Controlling GDM">Controlling GDM</a></li>
<li><a class="xref" href="bindir_binaries.html" title="GDM Commands in EXPANDED_BINDIR">GDM Commands in EXPANDED_BINDIR</a></li>
<li><a class="xref" href="sbindir_binaries.html" title="GDM Commands in EXPANDED_SBINDIR">GDM Commands in EXPANDED_SBINDIR</a></li>
<li><a class="xref" href="libexecdir_binaries.html" title="GDM Commands in EXPANDED_LIBEXECDIR">GDM Commands in EXPANDED_LIBEXECDIR</a></li>
<li><a class="xref" href="thememanual.html" title="Themed Greeter">Themed Greeter</a></li>
<li><a class="xref" href="accessibility.html" title="Accessibility">Accessibility</a></li>
<li><a class="xref" href="exampleconf.html" title="Example Configurations">Example Configurations</a></li>
<li><a class="xref" href="license.html" title="License">License</a></li>
</ul></div>
</li>
</ul></div></div></div>
<div class="body body-sidebar"><div class="division sect1">
<a name="overview"></a><div class="header"><h1 class="sect1 title"><span class="title">Overview</span></h1></div>
<ul class="linktrail"><li class="linktrail linktrail-only"><a class="linktrail" href="gdm.html" title="Gnome Display Manager Reference Manual">Gnome Display Manager Reference Manual</a></li></ul>
<div class="autotoc"><ul>
<li>
<span class="label">2.1. </span><a class="xref" href="overview.html#introduction" title="
        Introduction
      ">
        Introduction
      </a>
</li>
<li>
<span class="label">2.2. </span><a class="xref" href="overview.html#daemonov" title="The GDM Daemon">The GDM Daemon</a>
</li>
<li>
<span class="label">2.3. </span><a class="xref" href="overview.html#displaytypes" title="Different Display Types">Different Display Types</a>
</li>
<li>
<span class="label">2.4. </span><a class="xref" href="overview.html#xdmcp" title="
        XDMCP
      ">
        XDMCP
      </a>
</li>
<li>
<span class="label">2.5. </span><a class="xref" href="overview.html#xdmcpaccess" title="
        XDMCP Access Control
      ">
        XDMCP Access Control
      </a>
</li>
<li>
<span class="label">2.6. </span><a class="xref" href="overview.html#stdgreeter" title="The GTK+ Greeter">The GTK+ Greeter</a>
</li>
<li>
<span class="label">2.7. </span><a class="xref" href="overview.html#graphgreeter" title="The Themed Greeter">The Themed Greeter</a>
</li>
<li>
<span class="label">2.8. </span><a class="xref" href="overview.html#logging" title="Logging">Logging</a>
</li>
<li>
<span class="label">2.9. </span><a class="xref" href="overview.html#gdmuser" title="Security and the GDM User">Security and the GDM User</a>
</li>
</ul></div>
<div class="division sect2">
<a name="introduction"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.1. </span>
        Introduction
      </span></h2></div>
<p class="para block block-first"> 
        GDM is a replacement for XDM, the X Display Manager. Unlike its
        competitors (X3DM, KDM, WDM) GDM was written from scratch and does not
        contain any original XDM / X Consortium code. 
      </p>
<p class="para block">
        For further information about GDM, see the
        <a class="ulink" href="http://www.gnome.org/projects/gdm/" title="http://www.gnome.org/projects/gdm/">
        the GDM website</a>.
      </p>
</div>
<div class="division sect2">
<a name="daemonov"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.2. </span>The GDM Daemon</span></h2></div>
<p class="para block block-first"> 
        GDM was written with simplicity and security in mind. The overall
        design concept is this: 
      </p>
<p class="para block"> 
        Upon startup the <span class="filename">gdm</span> daemon parses its config file
        <span class="filename">gdm.conf</span>.  For each of the local displays
        <span class="filename">gdm</span> forks an Xserver and a slave process.  The
        main <span class="filename">gdm</span> process will then listen to XDMCP
        requests, if so configured, from remote displays and monitor the local
        display sessions.  The main daemon process will also allow starting of
        on new local Xservers on demand using the
        <span class="filename">gdmflexiserver</span> command.
      </p>
<p class="para block"> 
        The <span class="filename">gdm</span> slave process opens the display and starts
        <span class="filename">gdmlogin</span>, the graphical login application.
        <span class="filename">gdmlogin</span> runs as a dedicated user and communicates
        asynchronously with the slave process through a pipe.  Alternatively
        <span class="filename">gdmgreeter</span> command can be used which is the same
        as <span class="filename">gdmlogin</span> but allows greater themability.
        <span class="filename">gdmgreeter</span> is referred to as the Themed
        Greeter, while <span class="filename">gdmlogin</span> is refereed to as the
        GTK+ Greeter.
      </p>
<p class="para block"> 
        GDM relies heavily on the presence of PAM, Pluggable Authentication
        Modules, but supports regular crypt() and shadow passwords on legacy
        systems.
      </p>
<p class="para block">
        Remote displays can connect to the XDMCP port on the GDM host.
        <span class="filename">gdm</span> will grant access to hosts specified in the
        GDM service section in your TCP Wrappers configuration file. GDM does
        not support remote display access control on systems without TCP
        Wrappers.  XDMCP support can be turned off completely, however.
      </p>
<p class="para block">
        GDM includes several measures making it more resistant to denial of
        service attacks on the XDMCP service. A lot of the protocol parameters,
        handshaking timeouts etc. can be fine tuned. The defaults should work
        for most systems, however.  Don't change them unless you know what
        you are doing.
      </p>
<p class="para block">
        In general GDM is very reluctant regarding reading/writing of user
        files.  For instance it refuses to touch anything but regular files.
        Links, sockets and devices are ignored.  The value of the
        RelaxPermissions parameter determines whether GDM should accept files
        writable by the user's group or others.  These are ignored by default.
      </p>
<p class="para block">
        All operations on user files are done with the effective user id of the
        user.  If the sanity check fails on the user's
        <span class="filename">.Xauthority</span> file, a fallback cookie is created in
        <span class="filename">/tmp</span>.
      </p>
<p class="para block">
        Note that normally it is assumed that the home directory is only
        readable by the user.  However NFS traffic really goes "over the wire"
        and thus can be snooped.  For setups with NFS directories you should
        really use the <span class="filename">UserAuthDir</span> and set it to some
        local directory such as <span class="filename">/tmp</span>.  GDM will try to
        open the normal authorization file for reading as root, and if it
        fails, then it will conclude that it is on an NFS mount and it will
        automatically use <span class="filename">UserAuthFBDir</span>, which is usually
        <span class="filename">/tmp</span>.  This can be changed by setting
        <span class="filename">NeverPlaceCookiesOnNFS</span> in the
        <span class="filename">[security]</span> section to false.
      </p>
<p class="para block">
        GDM implements only the MIT-MAGIC-COOKIE-1 authorization scheme, see
        the XDMCP section for more information about this, especially relating
        to using X over the network.
      </p>
<p class="para block">
        Finally, the sysadmin can specify the maximum file size GDM should
        accept, and, if the face browser is enabled, a tunable maximum icon
        size is also enforced.  On large systems it is still advised to turn
        off the face browser for performance reasons. Looking up icons in
        homedirs, scaling and rendering face icons can take quite a long time.
        YMMV.
      </p>
<p class="para block">
        GDM also has a unix domain socket which can be used to control
        certain aspects of behavior, or to query information about running
        servers or logged in users.  This is the
        <span class="filename">/tmp/.gdm_socket</span> and the protocol is described
        in the sources in the <span class="filename">daemon/gdm.h</span> header file.
        The <span class="filename">gdmflexiserver</span> command uses this for example
        to launch on demand X servers for the user.
      </p>
</div>
<div class="division sect2">
<a name="displaytypes"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.3. </span>Different Display Types</span></h2></div>
<p class="para block block-first">
        GDM allows 3 different display types.  First local static X servers.
        These are always run, and when they die or are killed, they are
        restarted.  GDM can run as many of these as needed.  GDM can also
        manage servers on which it does not manage a login itself, thus
        allowing GDM to be used when building X terminals.
      </p>
<p class="para block">
        Next GDM supports flexible or on demand servers.  These are run by
        requesting one using the socket protocol.  There is a command,
        <span class="filename">gdmflexiserver</span>, which can do this for the user. 
        For standard X servers the user must be logged in from a console, on
        one of the servers that GDM has run.  This command can however also
        launch nested <span class="filename">Xnest</span> servers which can be started
        even from non-console logins.  This is generally done by running
        <span class="filename">gdmflexiserver -n</span>.  These servers
        are not restarted when the user session ends.  
        <span class="filename">gdmflexiserver</span> normally also locks the users
        screen before running a new server with xscreensaver.
      </p>
<p class="para block">
        Last display type is the XDMCP remote displays that are described in
        the next section.  Remote hosts can connect to GDM and present the
        login screen if this is enabled.  Some things may be different for
        these sessions, such as the Actions menu which allows you to shut down,
        reboot, or configure GDM will not be shown.
      </p>
</div>
<div class="division sect2">
<a name="xdmcp"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.4. </span>
        XDMCP
      </span></h2></div>
<p class="para block block-first">
        GDM also supports the X Display Manager Protocol (XDMCP) for managing
        remote displays.
      </p>
<p class="para block">
        GDM listens to UDP port 177 and will respond to QUERY and
        BROADCAST_QUERY requests by sending a WILLING packet to the originator.
      </p>
<p class="para block">
        GDM can also be configured to honor INDIRECT queries and present a
        host chooser to the remote display. GDM will remember the user's
        choice and forward subsequent requests to the chosen manager.  GDM
        also supports an extension to the protocol which will make it forget
        the redirection once the user's connection succeeds.  This extension
        is only supported if both daemons are GDM.  It is transparent and
        will be ignored by XDM or other daemons that implement XDMCP.
      </p>
<p class="para block">
        GDM only supports the MIT-MAGIC-COOKIE-1 authentication system.
        Normally little is gained from the other schemes, and no effort has
        been made to implement them so far.  Because of this the cookies go
        over the wire as clear text, and thus you should be careful about what
        network you use this on.  That is, you should be careful about through
        where your XDMCP connection is going.  Note that obviously if snooping
        is possible, then the attacker could just snoop your password as you
        log in, so a better XDMCP authentication wouldn't help you much anyway.
        If snooping is possible and undesirable, then you had better use ssh
        for tunneling an X connection anyway rather then using GDM's XDMCP.
        You could think of XDMCP as a sort of graphical telnet, having the
        same security issues.
      </p>
<p class="para block">
        On the upside, GDM's random number generation is very anal and GDM
        goes to extraordinary measures to truly get a 128 bit random number,
        using hardware random number generators if available, plus the current
        time (in microsecond precision), a 20 byte array of pseudorandom
        numbers, process pid's, plus other random information (possibly using
        <span class="filename">/dev/audio</span> or <span class="filename">/dev/mem</span> if
        hardware random generators are not available) to create a large buffer
        and then run MD5 digest on this.  Obviously, all this work is wasted if
        you send this cookie over an open network or store it on an NFS
        directory (see <span class="filename">UserAuthDir</span> configuration key).  So
        be careful about where you use remote X display.
      </p>
<p class="para block">
        Since it is fairly easy to do denial of service attacks on the XDMCP
        service, GDM incorporates a few features to guard against attacks.
        Please read the XDMCP reference section below for more information.
      </p>
<p class="para block">
        Even though GDM tries to outsmart potential attackers, it is still
        advised that you block UDP port 177 on your firewall unless you really
        need it. GDM guards against DoS attacks, but the X protocol is still
        inherently insecure and should only be used in controlled environments.
        Also each remote connection takes up lots of resources, so it is much
        easier to to DoS an XDMCP server then say a webserver.
      </p>
<p class="para block">
        In addition to UDP port 177, you should also block all the X server
        ports (TCP ports 6000 + display number) on the firewall as well.  Do
        note that various places in GDM will use display numbers 20 and higher
        (for example the on demand server stuff).  X is not a very safe
        protocol for leaving on the net, and XDMCP is even less safe.
      </p>
<p class="para block">
        Even though your display is protected by cookies the XEvents and thus
        the keystrokes typed when entering passwords will still go over the
        wire in clear text. It is trivial to capture these.  You should also be
        aware that cookies, if placed on an NFS mounted directory, are prone to
        eavesdropping too.  In case of NFS home directories you should really
        use the <span class="filename">UserAuthDir</span> and set it to some local
        temporary directory.
      </p>
<p class="para block">
        XDMCP is primarily useful for running thin clients such as in terminal
        labs.  Those thin clients will only ever need the network to access
        the server, and so it seems like the best policy securitywise to have
        those thin clients on a separate network that cannot be accessed by
        the outside world, and can only connect to the server.  The only point
        from which you need to access outside is the server.
      </p>
</div>
<div class="division sect2">
<a name="xdmcpaccess"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.5. </span>
        XDMCP Access Control
      </span></h2></div>
<p class="para block block-first">
        XDMCP access control is done using TCP wrappers.  It is possible to
        compile GDM without TCP wrappers however, so you should test your
        configuration to see if they work.
      </p>
<p class="para block">
        You should use the daemon name <span class="filename">gdm</span> in the
        <span class="filename">&lt;etc&gt;/hosts.allow</span> and
        <span class="filename">&lt;etc&gt;hosts.deny</span> files.  For example to 
        deny computers from <span class="filename">.evil.domain</span> from logging in,
        then add
      </p>
<div class=" block screen block-indent"><pre class="screen">gdm: .evil.domain</pre></div>
<p class="para block">
        to <span class="filename">&lt;etc&gt;/hosts.deny</span>.  You may also need
        to add
      </p>
<div class=" block screen block-indent"><pre class="screen">gdm: .your.domain</pre></div>
<p class="para block">
        to your <span class="filename">&lt;etc&gt;/hosts.allow</span> if you normally disallow
        all services from all hosts.  See the
        <a class="ulink" href="man:hosts.allow" title="man:hosts.allow">hosts.allow(5)</a> man
        page for details.
      </p>
<p class="para block">
        Even though GDM now tries very hard to ignore things coming from
        banned hosts you should not rely on the TCP Wrappers for complete
        protection.  It is really best to block UDP port 177 (and all the X
        ports which are TCP ports 6000 + the display number of course) on your
        firewall.
      </p>
</div>
<div class="division sect2">
<a name="stdgreeter"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.6. </span>The GTK+ Greeter</span></h2></div>
<p class="para block block-first">
        The GTK+ Greeter is the default graphical user interface that is
        presented to the user. The greeter contains a menu at the top, an
        optional face browser, an optional logo and a text entry
        widget.
      </p>
<p class="para block">
        The text entry field is used for entering logins, passwords,
        passphrases etc. <span class="filename">gdmlogin</span> is controlled by the
        underlying daemon and is basically stateless. The daemon controls the
        greeter through a simple protocol where it can ask the greeter for a
        text string with echo turned on or off. Similarly, the daemon can
        change the label above the text entry widget to correspond to the
        value the authentication system wants the user to enter.
      </p>
<p class="para block">
        The menu bar in the top of the greeter enables the user to select the
        requested session type/desktop environment, select an appropriate
        locale/language and optionally shutdown/reboot/suspend the computer,
        configure GDM (given the user knows the root password), change
        the GTK+ theme, or start an XDMCP chooser.
      </p>
<p class="para block">
        Optionally the greeter can provide a face browser containing icons for
        all the users on a system. The icons can be installed globally by the
        sysadmin or in the users' home directories.  If installed globally
        they should be in the <span class="filename">&lt;share&gt;/pixmaps/faces/</span>
        directory (though this can be configured with the
        <span class="filename">GlobalFaceDir</span>
        configuration option) and the filename should be the name of the user,
        optionally with a <span class="filename">.png</span> appended.
      </p>
<p class="para block">
        The users can place their icons in a file called
        <span class="filename">~/.face</span>, and they can use the command
        <span class="filename">gdmphotosetup</span> to graphically configure this.
      </p>
<p class="para block">
        Face icons placed in the global face directory must be readable to
        the GDM user.  However, the daemon, proxies user pictures to the
        greeter and thus those don't have be be readable by the GDM user, but
        root.
      </p>
<p class="para block">
        Please note that loading and scaling face icons located in user home
        directories can be a very time consuming task.  Especially on large
        systems or systems running NIS. The browser feature is only intended
        for systems with relatively few users.  Also if home directories are
        on an on demand mounted filesystem like AFS, then GDM may mount all
        the home directories just to check for pictures if the face browser is
        on.  GDM will try to give up after 5 seconds of activity however and
        only display the users whose pictures it has gotten so far.
      </p>
<p class="para block">
        To control the faces that get displayed, there are a number of 
        configuration options that can be used.  If the
        <span class="filename">Include</span> option contains a list of users
        separated by commas, then only the specified users will be displayed.
        If the <span class="filename">IncludeAll</span> option is set to true, then
        the password file will be scanned and all users will be displayed.
        Any user listed in the <span class="filename">Exclude</span> option and users
        whose UID's is lower than <span class="filename">MinimalUID</span> will be
        filtered out.
      </p>
<p class="para block">
        When the browser is turned on, valid usernames on the computer are
        inherently exposed to a potential intruder.  This may be a bad idea if
        you don't know who can get to a login screen.  This is especially true
        if you run XDMCP.  However you should never run XDMCP on an open
        network anyway.
      </p>
<p class="para block">
        The greeter can optionally display a logo in the login window.  The
        image must be in a format readable to the gdk-pixbuf library (GIF,
        JPG, PNG, TIFF, XPM and possibly others), and it must be readable to
        the GDM user. See the <span class="filename">Logo</span> option in the
        reference section below for details.
      </p>
</div>
<div class="division sect2">
<a name="graphgreeter"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.7. </span>The Themed Greeter</span></h2></div>
<p class="para block block-first">
        The Themed Greeter is a greeter interface that takes up the whole
        screen and is very themable.  Themes can be selected and new themes
        can be installed by the configuration application or by setting the
        <span class="filename">GraphicalTheme</span> configuration key.
      </p>
<p class="para block">
        The look and feel of this greeter is really controlled by the theme and
        so the user interface elements that are present may be different.  The
        only thing that must always be present is the text entry field as
        described above in the GTK+ Greeter.
      </p>
<p class="para block">
        You can always get a menu of available actions by pressing the F10 key.
        This can be useful if the theme doesn't provide certain buttons when
        you really wish to do some action.
      </p>
</div>
<div class="division sect2">
<a name="logging"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.8. </span>Logging</span></h2></div>
<p class="para block block-first">
        GDM itself will use syslog to log errors or status.  It can also log
        debugging information, but this is not generally useful unless
        something is very wrong, and this must be enabled in the configuration
        file.
      </p>
<p class="para block">
        Output from the various X servers is stored in the GDM log directory,
        which is configurable, but is usually
        <span class="filename">&lt;var&gt;/log/gdm/</span>.  The output from the
        session can be found in a file called
        <span class="filename">&lt;display&gt;.log</span>.  Four older files are also
        stored with <span class="filename">.1</span> through 
        <span class="filename">.4</span> appended.  These will be rotated as new
        sessions on that display are started.  You can use these logs to view
        what the X server said when it started up.
      </p>
<p class="para block">
        The output from the user session is redirected to
        <span class="filename">~/.xsession-errors</span>
        before even the <span class="filename">PreSession</span> script is started.  So
        it is not really necessary to redirect this again in the session setup
        script.  As is usually done.  If the user session lasted less then
        10 seconds, GDM assumes that the session crashed and allows the user to
        view this file in a dialog before returning to the login screen.
        This way the user can view the session errors from the last session
        and correct the problem this way.
      </p>
<p class="para block">
        You can suppress the 10 second warning by returning code 66 from the
        <span class="filename">Xsession</span>script or from your session binary (the
        default <span class="filename">Xsession</span> script propagates those codes
        back).  This is useful if you have some sort of special logins for
        which it is not an error to return less then 10 seconds later, or if
        you setup the session to already display some error message and the
        GDM message would be confusing and redundant.
      </p>
<p class="para block">
        The session output is piped through the GDM daemon and so the
        <span class="filename">~/.xsession-errors</span> file is capped at about
        200 kilobytes by GDM to prevent a possible denial of service attack
        on the session.  An app could perhaps on reading some wrong data print
        out warnings or errors on the stderr or stdout.  This could perhaps
        fill up the users home directory who would then have to log out and
        log back in to clear this.  This could be especially nasty if quotas
        are set.  GDM also correctly traps the XFSZ signal and stops writing
        the file, which would lead to killed sessions if the file was
        redirected in the old fashioned way from the script.
      </p>
<p class="para block">
        Note that some distributors seem to override the
        <span class="filename">~/.xsession-errors</span> redirection and do it
        themselves in their own Xsession script (set by the
        <span class="filename">BaseXsession</span> configuration key) which means that
        GDM will not be able to trap the output and cap this file.  You also
        lose output from the <span class="filename">PreSession</span> script which can
        make debugging things harder to figure out as perhaps useful output
        of what is wrong will not be printed out.  See the description of the
        <span class="filename">BaseXsession</span> configuration key for more
        information, especially on how to handle multiple display managers
        using the same script.
      </p>
<p class="para block">
        Note that if the session is a failsafe session, or if GDM can't open
        this file for some reason, then a fallback file will be created in the
        <span class="filename">/tmp</span> directory named
        <span class="filename">/tmp/xses-&lt;user&gt;.XXXXXX</span> where the
        <span class="filename">XXXXXX</span> are some random characters.
      </p>
<p class="para block">
        If you run a system with quotas set, it would be good to delete the
        <span class="filename">~/.xsession-errors</span> in the
        <span class="filename">PostSession</span> script.  Such that this log file
        doesn't unnecessarily stay around.
      </p>
</div>
<div class="division sect2">
<a name="gdmuser"></a><div class="header"><h2 class="sect2 title"><span class="title"><span class="label">2.9. </span>Security and the GDM User</span></h2></div>
<p class="para block block-first">
        The GDM daemon normally runs as root, as does the slave.  However GDM
        should also have a dedicated user id and a group id which it uses for
        its graphical interfaces such as <span class="filename">gdmgreeter</span> and
        <span class="filename">gdmlogin</span>.  You can choose the name of this user
        and group in the <span class="filename">[daemon]</span> section of the
        configuration file.
      </p>
<p class="para block">
        The GDM user, and group, which are normally just
        <span class="filename">gdm</span> should not be user or group of any particular
        privilege.  The reason for using them is to have the user interface
        run as a user without privileges so that in the unlikely case that
        someone finds a weakness in the GUI, they cannot access root on the
        computer.
      </p>
<p class="para block">
        It should however be noted that the GDM user and group have some
        privileges that make them somewhat dangerous.  For one they have
        access to the server authorization directory (the
        <span class="filename">ServAuthDir</span>), which contains all the X server
        authorization files and other private information.  This means that
        someone who gains the GDM user/group privileges can then connect to
        any session.  So you should not, under any circumstances, make this
        some user/group which may be easy to get access to, such as the
        user <span class="filename">nobody</span>.
      </p>
<p class="para block">
        The server authorization directory (the
        <span class="filename">ServAuthDir</span>) is used for a host of random
        internal data in addition to the X server authorization files, and the
        naming is really a relic of history.  GDM daemon enforces this
        directory to be owned by <span class="filename">root.gdm</span> with the
        permissions of 1770.  This way, only root and the GDM group have write
        access to this directory, but the GDM group cannot remove the root
        owned files from this directory, such as the X server authorization
        files.
      </p>
<p class="para block">
        GDM by default doesn't trust the server authorization directory and
        treats it in the same way as the temporary directory with respect to
        creating files.  This way someone breaking the GDM user cannot mount
        attacks by creating links in this directory.  Similarly the X server
        log directory is treated safely, but that directory should really be
        owned and writable only by root.
      </p>
<p class="para block">
        Anybody found not using a dedicated user for GDM should be whacked over
        the head with a large, blunt, heavy and rusty object, although the
        rusty requirement may be dropped if there is not enough time to have
        the object develop rust.
      </p>
</div>
</div></div>
<div class="navbar navbar-bottom"><table class="navbar"><tr>
<td class="navbar-prev"><a class="navbar-prev" href="preface.html" title="Terms and Conventions Used in This Manual">Terms and Conventions Used in This Manual</a></td>
<td class="navbar-next"><a class="navbar-next" href="configuration.html" title="Configuration">Configuration</a></td>
</tr></table></div>
</body>
</html>
