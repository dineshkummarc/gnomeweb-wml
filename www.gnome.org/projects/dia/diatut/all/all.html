<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<HEAD>
<TITLE>Dia Tutorial</TITLE>
<META NAME="title" CONTENT="Dia Tutorial">
<META NAME="subject" CONTENT="">
<META NAME="description" CONTENT="Tutorial for the Dia diagramming application">
<META NAME="author" CONTENT="Harry George">
<META NAME="date" CONTENT="2000-10-06">
<META NAME="validuntil" CONTENT="2000-12-31">
<META NAME="robots" CONTENT="none">
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000"  LINK="#0000ff" VLINK="#990099" ALINK="#FF0000">
<TABLE WIDTH=800>
<TR>
<TD VALIGN="TOP" WIDTH=100>&nbsp;</TD>
<TD VALIGN="TOP" WIDTH=600><P ALIGN=CENTER><Center><IMG SRC="dialogo.jpg"  alt="Dia Tutorial"></CENTER></P><P ALIGN=CENTER><FONT SIZE=6>Dia Tutorial</FONT></P><P ALIGN=CENTER>&nbsp; <A HREF="http://www.lysator.liu.se/~alla/dia/">Dia</A>&nbsp; <A HREF="http://www.gtk.org/">GTK+</A></P></TD>
<TD VALIGN="TOP" WIDTH=100>&nbsp;</TD>
</TR>
<TD VALIGN="TOP" WIDTH=100></TD>
<TD VALIGN="TOP" WIDTH=600>
<H1><A NAME="#toc">Table of Contents</A></H1>
<UL>
<LI><A HREF="#L001"> 1 Abstract</A>
<LI><A HREF="#L002"> 2 Introduction</A>
<LI><A HREF="#L003"> 3 Installation</A>
<LI><A HREF="#L004"> 4 Basics</A>
<UL>
<LI><A HREF="#L005"> 4.1 Startup</A>
<LI><A HREF="#L006"> 4.2 New diagram</A>
<LI><A HREF="#L007"> 4.3 Draw an Organization Chart</A>
<LI><A HREF="#L008"> 4.4 Boxes and text</A>
<LI><A HREF="#L009"> 4.5 Lines</A>
<LI><A HREF="#L010"> 4.6 Saving</A>
 </UL>
<LI><A HREF="#L011"> 5 Advanced</A>
<UL>
<LI><A HREF="#L012"> 5.1 Layers</A>
<UL>
<LI><A HREF="#L013"> 5.1.1 Simple case</A>
<LI><A HREF="#L014"> 5.1.2 Full layering</A>
 </UL>
<LI><A HREF="#L015"> 5.2 Alignment</A>
<LI><A HREF="#L016"> 5.3 Selection</A>
<LI><A HREF="#L017"> 5.4 Shape Libraries</A>
 </UL> </UL><p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>

<H1><A NAME="L001">1 Abstract</A></H1>
<p>
This tutorial introduces
<A HREF="http://www.lysator.liu.se/~alla/dia/">Dia</A>, the GTK-based GNU
diagramming tool.  We will install and configure the tool, then learn
to use the basic shapes, then explore advanced features.
<p>

<H1><A NAME="L002">2 Introduction</A></H1>
From <A HREF="http://www.lysator.liu.se/~alla/dia/">Dia home</A>:
<p>
<BLOCKQUOTE><p>
Welcome to Dia's homepage. Dia is a gtk+ based diagram creation
program released under the GPL license.
<p>
Dia is designed to be much like the commercial Windows program
'Visio'. It can be used to draw many different kinds of diagrams. It
currently has special objects to help draw entity relationship
diagrams, UML diagrams, flowcharts, network diagrams, and simple
circuits. It is also possible to add support for new shapes by writing
simple XML files, using a subset of SVG to draw the shape.
<p>
It can load and save diagrams to a custom XML format (gzipped by
default, to save space), can export diagrams to EPS or SVG formats and
can print diagrams (including ones that span multiple pages).
<p>
</BLOCKQUOTE><p>
<p>
<p>

<H1><A NAME="L003">3 Installation</A></H1>
<p>
From the v0.86 INSTALL file:

<PRE>
REQUIREMENTS:
=============

Dia needs Gtk+ at least version 1.2.0 installed.
It can be found at:

ftp://ftp.gtk.org/pub/gtk/v1.2/

Binaries availible at:
  ftp://ftp.gtk.org/pub/gtk/binary/devel/RPMS/
or
  ftp://ftp.gtk.org/pub/gtk/binary/devel/DEBIAN/

As of version 0.30 Dia also needs libxml (aka gnome-xml). I recommend you
get a fairly recent version, but not version 1.8.0.  It can be found here:
  ftp://ftp.gnome.org/pub/GNOME/stable/sources/gnome-xml/

As of version 0.40 Dia needs gdk_imlib, at least version 1.8.2.
It can be found here:
  ftp://ftp.gnome.org/pub/GNOME/stable/sources/imlib/

BUILDING:
=========

To build, run:

 ./configure
 make

</PRE>
<p>
To build dia, you need to install (in order):
<UL>
<LI> From <A HREF="http://www.gtk.org/">GTK</A>:
<UL>
<LI> glib

<LI> gtk+
</UL>
<LI> From: <A HREF="http://www.gnome.org">Gnome</A> (optional):
<UL>
<LI> base libraries (installed in order per gnome instructions)
</UL>
<LI> From <A HREF="http://www.lysator.liu.se/~alla/dia/">Dia</A>:
<UL>
<LI> dia.  If you installed gnome, configure with "--enable-gnome"
</UL></UL><p>
Each of these is an autoconf-style install from sources.  Binaries are
available for some platforms.  If you have a recent Linux
installation, you may have all the pieces already.
<p>
<p>

<H1><A NAME="L004">4 Basics</A></H1>

<H2><A NAME="L005">4.1 Startup</A></H2>
Once installed, the app is started with:

<PRE>
  dia
</PRE>
<p>
This gives:
<p>
<IMG SRC="../basics/mainwin.png" alt="mainwin.png"><p>
<p>
The first time up, you click File...Preferences and fill in personal
choices.  These are saved in your home dir as .dia/diarc.  For
example, I generally use the defaults except I make sure it is set to:
<p>
<UL>
<LI> User Interface...
<UL>
<LI> Compress...no (so I can easily manipulate the UML models later.  
    If I were worried about space, I'd use "yes")
</UL>
<LI> Grid lines...
<UL>
<LI> Visible...yes

<LI> Snap to...yes
</UL></UL><p>
After clicking OK on the preferences, you can make a diagram.
<p>

<H2><A NAME="L006">4.2 New diagram</A></H2>
<p>
Clicking File...New gives:
<p>
<IMG SRC="../basics/newwin.png" alt="newwin.png"><p>
Right-clicking in that window gives a diagram-specific menu.  From that select File...page setup:
<p>
<IMG SRC="../basics/newpage.png" alt="newpage.png"><p>
Typically:
<UL>
<LI> Paper size: Use Letter for US printers.

<LI> Orientation:  Use portrait for most web pages, 
and landscape for viewfoils

<LI> Margins:  Leave as is.  They resize for the paper size.

<LI> Scaling: Leave as Scale...100.  However, we'll come back to this later.
</UL><p>
After clicking OK, the page setup goes away and you are ready to
populate the diagram.
<p>

<H2><A NAME="L007">4.3 Draw an Organization Chart</A></H2>
<p>
An organization chart requires several boxes with text, some piped
solid lines, and a few dashed lines.  This can be done with the
basic tools.  So how do we use the basic tools?
<p>
Notice the mainwindow's layout:
<p>
<IMG SRC="../basics/layout.png" alt="layout.png"><p>
If you hold the mouse over an icon, a tooltip will appear.  If you
click an icon, the tool is activated and any clicks in the diagram
will provide a copy of that tool. After clicking and placing one or
more copies of a shape, click the pointer tool (top left arrow icon)
before attempting to move things around.  (Otherwise you will get lots
of unexpected shapes.)
<p>
The easiest way to work is to:
<p>
<OL TYPE="a">
<LI> Select a shape

<LI> Click approximately the right number of them onto your diagram.

<LI> Label them (most shapes accept text labels).

<LI> Move the shapes into place.

<LI> Connect them with lines.  
Make sure the lines actually link to the shape handles.

<LI> Label the lines as needed.

<LI> Drag shapes and lines around as needed.  
Add connection points as needed to make tidy lines.

<LI> Add/modify more shapes and lines as needed.
</OL><p>
For an org chart, we'll start with:
<p>
<IMG SRC="../basics/org1.png" alt="org1.png"><p>
That looks terrible.  The text doesn't line up with the boxes, and the
font is tacky.  How can we fix it?
<p>

<H2><A NAME="L008">4.4 Boxes and text</A></H2>
<p>
We could use a box which knows about text, and resizes around
text.  The boxes in the Flowchart library (e.g., the square) can do
this.  We could even make our own shape which knows about text.
<p>
But let's do it the hard way for now, with the basic box.
<p>
First, get the font right.  Select a text item.  Right-click to get
the menu, then Dialogs...Properties.  Select Helvetica.  Leave the
size as is -- we can scale later.  Do this for each text item.
<p>
Next, carefully center the text in the box.  Drag the box bigger if
needed.  Since the default is snap-to-grid, it will be difficult to
align the text.  So let's turn off snap-to-grid for a moment: With
the pointer tool, click somewhere in the diagram (but not on a
specific item), and type "g".  Drag the text as needed, then type "g"
again to toggle back to snap-to-grid.
<p>
Ok, the text is the right font and is aligned nicely.  Let's lock
those box-and-text combinations together.  Use the pointer to drag a
selection box (dashed lines) around a box-and-text combo.  Type
"Ctl-G" to make them a group.  Do this for each of the boxes.  
<p>
If you need to un-group a combo (e.g., to edit the text or realign),
type "Ctl-U".  For example, we notice misspellings, so we ungroup to
fix those and then regroup.
<p>
We now have:
<p>
<IMG SRC="../basics/org2.png" alt="org2.png"><p>

<H2><A NAME="L009">4.5 Lines</A></H2>
<p>
Now we can draw some lines.  We'll use the piped lines (90 degree
turns).  We draw them approximately from one item to the next, and
then use the pointer to drag the ends directly to the handles at each
end.  The line end turns red when it locks in to a handle.
<p>
We want to make the lines more interesting.  
<p>
In general, lines are controlled from the main window in several ways:
<OL TYPE="a">
<LI> Line color, via the foreground/background icon.

<LI> Line width, via the vertical lines of varying width

<LI> Line style (e.g., dotted, dashed), via the middle of the bottom row.

<LI> Line end arrows, via the left and right ends of the bottom row.
</OL><p>
All of these apply to future lines.  You can also modify an
already-drawn line.  Select it using the pointer.  Right-click to get
the diagram menu.  Select Dialogs...properties.  This brings up a
dialog for changing any of the line's properties.
<p>
Thus, to fix our current lines: For each line, select the line,
right-click to get the menu, select Dialogs...Properties, and change
the line width from 0.1 to 0.2.  Change the System
Architect-to-Project Manager line to dotted line.  But the wide dots
look odd, so we change to dashed lines.  The dashes are too long, so
we make the dash interval 0.5.  The net effect is:
<p>
<IMG SRC="../basics/org3.png" alt="org3.png"><p>
Let's say the Systems Architect actually reports to the CIO (via a
long chain of middle managers of course).  We want to note that, but
not over emphasize it.  So we draw it in a thin line:
<p>
<IMG SRC="../basics/org4.png" alt="org4.png"><p>
Ugh.  We want that line to go around the outside.  But there aren't
enough middle bending points in the line to do it.  So we select the
line and the middle-click, to get the add-segment dialog.  After
adding a segment or two, we can drag the line to make a nice
connection:
<p>
<IMG SRC="../basics/org5.png" alt="org5.png"><p>

<H2><A NAME="L010">4.6 Saving</A></H2>
<p>
Ok, the diagram looks pretty good.  Time to save it.  First, we want
to save the intellectual content, so we can later modify it.  Second,
we want to export it as a specific graphic format.
<p>
To save it, right-click for the menu, then File...Save.  Insert the
name, e.g., <TT>org.dia</TT>, and click OK.  If you are saving a whole
series of variants on the same file and need to save each to a
separate file, use File...Save As.  The file is saved in an XML format
which is mostly Scalable Vector graphics (SVG).  NOTE: Since we set
Compress to No in the user preferences, we can examine the file in a
text editor.  Go take a look.
<p>
To export a usable image, select File...Export, and then enter the
name with an appropriate extension, e.g., <TT>org.png</TT>.  Look at the
extensions list for candidates.  If you don't have a preference, we
suggest png (Portable Network Graphics).
<p>
A simple export may make a rather large image.  If you look closely at
the diagram window, you can see blue lines representing printable
pages.  Your diagram probably extends over several pages.  So if you
print out the diagram to a physical printer, you will need to tape the
pieces together.  This is not much of a concern for HTML, where the
browser can pan back and forth over a large image.  However, even for
HTML a large image can be awkward.
<p>
So here is the recommendation:
<p>
<UL>
<LI> Build the diagram to any convenient size

<LI> Save it as is

<LI> Export it as is (full sized), for use in HTML links

<LI> Export another copy for directly embedding in an HTML page.
<p>
Do this via File...Page setup...Scaling...Fit 1 by 1.  This will show
the scaling needed to fit the whole diagram on one page.  But even
that may be too large, so you can switch back to Scaling...Scale, and
tweak the numbers until a convenient size is found for your HTML
context.
<p>
</UL><p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>

<H1><A NAME="L011">5 Advanced</A></H1>

<H2><A NAME="L012">5.1 Layers</A></H2>
<p>

<H3><A NAME="L013">5.1.1 Simple case</A></H3>
<p>
Suppose we have four UML "class" objects, and want to draw a box around
two of them.  Doing so leaves the box on top and obstructs view of the
two boxed classes.  Putting the box in the background solves the
problem.  
<p>
Putting an object in the background is done by first selecting it, and then:
<p>
<OL TYPE="a">
<LI> Long way: Right-click for menu...Objects...Send to back

<LI> Shortcut: Ctl-B
</OL><p>
<IMG SRC="../advanced/layers1.png" ALT="../advanced/layers1.png"><p>

<H3><A NAME="L014">5.1.2 Full layering</A></H3>
<p>
Now suppose we have a common background (e.g., project logo) and want
to build our diagram on top of that.  It is no longer convenient to do
this object by object.  Instead we want to establish the layers in
advance and use them over time.  
<p>
If you are familiar with Gimp layers, you are in business -- it is the
same mechanism. Otherwise, listen carefully.
<p>
When you start a new diagram, after doing page setup, select
right-click...Objects...layers.  This gives:
<p>
<IMG SRC="../advanced/layer_dialog.png" ALT="../advanced/layer_dialog.png"><p>
Click on the "new layer" icon (page with corner turned down), and you
will get a "New layer".  It is automatically placed above the
Background layer.  Click on the layer's name to select it.  Once
selected, you can move it relative to the other layers using the up
and down arrows.  Of course you should leave the Background layer at
the bottom of the stack.
<p>
Clicking on the eyeball next to a layer toggles whether or not it is
visible in the diagram.  Generally, you build each layer separately,
with just it visible, but turn on all layers occasionally to check
alignment.
<p>
For our example, we put a text object which says "DRAFT" on the
background layer.  We make this text object grey using the color
selector.  Then we go to the new layer and make a diagram.  Making
both layers visible gives:
<p>
<IMG SRC="../advanced/layers2.png" ALT="../advanced/layers2.png"><p>
<p>

<H2><A NAME="L015">5.2 Alignment</A></H2>
<p>
Suppose we have several objects roughly aligned:
<p>
<IMG SRC="../advanced/align1.png" ALT="../advanced/align1.png"><p>
We could very carefully drag them around to get them aligned.  But a
better approach is to use the alignment functions.  Select the
almost-vertically-aligned circles.  Right-click to get the menu,
then...Objects...Horizontal...center.  This moves the objects
horizontally until their centers are aligned vertically.  
<p>
Yes, it is a bit confusing: To align on a vertical axis, you have to
select horizontal, because that is the axis on which the movement
takes place.  
<p>
Similarly, to align objects along a single horizontal axis, you select
Objects...Vertical...center.  After aligning groups vertically and
horizontally, we get:
<p>
<IMG SRC="../advanced/align2.png" ALT="../advanced/align2.png"><p>
<p>

<H2><A NAME="L016">5.3 Selection</A></H2>
<p>
The obvious ways to select are:
<p>
<OL TYPE="a">
<LI> With pointer, click on an item

<LI> With pointer, and shift-button down, click on 1 or more items

<LI> With pointer, drag dashed-line box around the items to be selected
</OL><p>
But you might want something fancier.  In that case, Right-click to
get the menu and then Select....  This gives the dialog:
<p>
<p>
<IMG SRC="../advanced/select_dialog.png" ALT="../advanced/select_dialog.png"><p>
<p>
For example, applied to this diagram, after selecting the "A" object:
<p>
<IMG SRC="../advanced/select1.png" ALT="../advanced/select1.png"><p>
<UL><p>

<LI> All: All boxes and lines are selected.
<p>

<LI> None: No boxes or lines are selected (e.g., A is also unselected)
<p>

<LI> Invert: Everything is selected <I>except</I> A
<p>

<LI> Connected: A and L1 and L3 are selected, because L1 and L2 are
directly connected to A.
<p>

<LI> Transitive: A,B,C,D, and L1,L2,L3 are selected, because by
following connections, you can reach each of these.  E is left out
because it cannot be reached.
<p>

<LI> Same Type: A,B,C,D,E are selected, because they are the same
type of Dia object (i.e., all UML class objects).
<p>
</UL><p>
NOTE: If I ever figure out what the check boxes do, I'll let you know.
<p>

<H2><A NAME="L017">5.4 Shape Libraries</A></H2>
<p>
Dia comes with several shape libraries.  It is also designed to allow
you to add your own.  
<p>
These libraries are of course domain-specific, so their use should be
described in other contexts (e.g., UML should be discussed in a
tutorial on software engineering).  Here we will concentrate on the
mechanics of using the shape libraries.
<p>
The libraries are saved in the share dir for wherever dia is
installed.  For example if <TT>which dia</TT> gives <TT>/usr/bin/dia</TT>, then we
want to look at <TT>/usr/share.dia</TT>:
<p>

<PRE>
/usr/share/dia/
  dia_logo.png         Dia's logo
  shapes/
    Flowchart/         objects, in paired files (icon and shape)
      magdisk.xpm      icon
      magdisk.shape    shape description
      ...
  sheets/      object descriptions in various languages (XML)
    ER.sheet
    Flowchart.sheet
    UML.sheet
    ...
</PRE>
<p>
For example, if we are interested in the Flowchart library, and
specifically in the magnetic disk object, we find the magdisk.shape
file:
<p>

<PRE>
&lt;?xml version=&quot;1.0&quot;?&gt;

&lt;shape xmlns=&quot;http://www.daa.com.au/~james/dia-shape-ns&quot;
       xmlns:svg=&quot;http://www.w3.org/TR/2000/03/WD-SVG-20000303/DTD/svg-20000303-stylable.dtd&quot;&gt;
  &lt;name&gt;Flowchart - Magnetic Disk&lt;/name&gt;
  &lt;description&gt;Magnetic Disk&lt;/description&gt;
  &lt;icon&gt;magdisk.xpm&lt;/icon&gt;
  &lt;connections&gt;
    &lt;point x=&quot;0&quot;   y=&quot;2&quot;/&gt;
    &lt;point x=&quot;2.5&quot; y=&quot;0.4375&quot;/&gt;
    &lt;point x=&quot;5&quot;   y=&quot;0&quot;/&gt;
    &lt;point x=&quot;7.5&quot; y=&quot;0.4375&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;0&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;2.5&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;7.5&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;5&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;10&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;2.5&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;5&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;7.5&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;10&quot;/&gt;
    &lt;point x=&quot;2.5&quot; y=&quot;11.5625&quot;/&gt;
    &lt;point x=&quot;5&quot;   y=&quot;12&quot;/&gt;
    &lt;point x=&quot;7.5&quot; y=&quot;11.5625&quot;/&gt;
  &lt;/connections&gt;
  &lt;textbox x1=&quot;0&quot; y1=&quot;4&quot; x2=&quot;10&quot; y2=&quot;10&quot;/&gt;
  &lt;svg:svg width=&quot;10&quot; height=&quot;12&quot;&gt;
    &lt;svg:path d=&quot;M 0,2 c 2,-1.5 3,-2 5,-2 s 3,0.5 5,2 v 8
                 c -2,1.5 -3,2 -5,2 s -3,-0.5 -5,-2 v -8 z
                 M 0,2 c 2,1.5 3,2 5,2 s 3,-0.5 5,-2&quot; style=&quot;fill: default&quot;/&gt;
  &lt;/svg:svg&gt;
&lt;/shape&gt;
</PRE>
<p>
Notice:
<OL TYPE="a">
<LI> The name value maps to the description lines in the Flowchart.sheet file

<PRE>
    &lt;object name=&quot;Flowchart - Magnetic Disk&quot;&gt;
      &lt;description xml:lang=&quot;no&quot;&gt;Magnetdisk&lt;/description&gt;
      &lt;description xml:lang=&quot;fr&quot;&gt;Disque Magnétique&lt;/description&gt;
      &lt;description xml:lang=&quot;de&quot;&gt;Magnetdisk&lt;/description&gt;
      &lt;description&gt;Magnetic Disk&lt;/description&gt;
    &lt;/object&gt;
</PRE>
<p>
Thus, we get language-specific tooltips.
<p>

<LI> The icon value is the file name of the icon shown on the main
window.
<p>

<LI> The shape is described by a Scalable Vector Graphics (svg)
width/height and path.  
<p>

<LI> The location of connection points is given in the context of the
width and height.  You can add other connection points if you wish.
<p>

<LI> The associated text field is also defined in the context of the
width and height.  Originally, it is under the magdisk object. You
could move that to the middle of the magdisk object if you wished.
<p>
</OL><p>
You can make your own sheets/shapes by following the above patterns.
<p>
Some shape libraries (e.g., UML) have associated processing and
therefore are not just .shape files.  To make your own
library-with-processing requires going into the C code, and that is
beyond the scope of this tutorial.  (Perhaps embedded python will be
supported in the future, simplifying even this adventure.)
<p>
</TD>
<TD VALIGN="TOP" WIDTH=100></TD>
<TR>
<TD VALIGN="TOP" WIDTH=100>&nbsp;</TD>
<TD VALIGN="TOP" WIDTH=600><HR>Creator: <A HREF="mailto:hgg9140@seanet.com">Harry George</A><BR>Updated/Created: 2000-10-06</TD>
<TD VALIGN="TOP" WIDTH=100>&nbsp;</TD>
</TR>
</TABLE>
</BODY>
</HTML>
