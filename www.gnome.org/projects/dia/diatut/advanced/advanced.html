<H1><A NAME="#toc">Table of Contents</A></H1>
<UL>
<UL>
<LI><A HREF="#L001"> Layers</A>
<UL>
<LI><A HREF="#L002"> Simple case</A>
<LI><A HREF="#L003"> Full layering</A>
 </UL>
<LI><A HREF="#L004"> Alignment</A>
<LI><A HREF="#L005"> Selection</A>
<LI><A HREF="#L006"> Shape Libraries</A>
 </UL> </UL>
<H2><A NAME="L001">Layers</A></H2>
<p>

<H3><A NAME="L002">Simple case</A></H3>
<p>
Suppose we have four UML "class" objects, and want to draw a box around
two of them.  Doing so leaves the box on top and obstructs view of the
two boxed classes.  Putting the box in the background solves the
problem.  
<p>
Putting an object in the background is done by first selecting it, and then:
<p>
<OL TYPE="a">
<LI> Long way: Right-click for menu...Objects...Send to back

<LI> Shortcut: Ctl-B
</OL><p>
<IMG SRC="../advanced/layers1.png" ALT="../advanced/layers1.png"><p>

<H3><A NAME="L003">Full layering</A></H3>
<p>
Now suppose we have a common background (e.g., project logo) and want
to build our diagram on top of that.  It is no longer convenient to do
this object by object.  Instead we want to establish the layers in
advance and use them over time.  
<p>
If you are familiar with Gimp layers, you are in business -- it is the
same mechanism. Otherwise, listen carefully.
<p>
When you start a new diagram, after doing page setup, select
right-click...Objects...layers.  This gives:
<p>
<IMG SRC="../advanced/layer_dialog.png" ALT="../advanced/layer_dialog.png"><p>
Click on the "new layer" icon (page with corner turned down), and you
will get a "New layer".  It is automatically placed above the
Background layer.  Click on the layer's name to select it.  Once
selected, you can move it relative to the other layers using the up
and down arrows.  Of course you should leave the Background layer at
the bottom of the stack.
<p>
Clicking on the eyeball next to a layer toggles whether or not it is
visible in the diagram.  Generally, you build each layer separately,
with just it visible, but turn on all layers occasionally to check
alignment.
<p>
For our example, we put a text object which says "DRAFT" on the
background layer.  We make this text object grey using the color
selector.  Then we go to the new layer and make a diagram.  Making
both layers visible gives:
<p>
<IMG SRC="../advanced/layers2.png" ALT="../advanced/layers2.png"><p>
<p>

<H2><A NAME="L004">Alignment</A></H2>
<p>
Suppose we have several objects roughly aligned:
<p>
<IMG SRC="../advanced/align1.png" ALT="../advanced/align1.png"><p>
We could very carefully drag them around to get them aligned.  But a
better approach is to use the alignment functions.  Select the
almost-vertically-aligned circles.  Right-click to get the menu,
then...Objects...Horizontal...center.  This moves the objects
horizontally until their centers are aligned vertically.  
<p>
Yes, it is a bit confusing: To align on a vertical axis, you have to
select horizontal, because that is the axis on which the movement
takes place.  
<p>
Similarly, to align objects along a single horizontal axis, you select
Objects...Vertical...center.  After aligning groups vertically and
horizontally, we get:
<p>
<IMG SRC="../advanced/align2.png" ALT="../advanced/align2.png"><p>
<p>

<H2><A NAME="L005">Selection</A></H2>
<p>
The obvious ways to select are:
<p>
<OL TYPE="a">
<LI> With pointer, click on an item

<LI> With pointer, and shift-button down, click on 1 or more items

<LI> With pointer, drag dashed-line box around the items to be selected
</OL><p>
But you might want something fancier.  In that case, Right-click to
get the menu and then Select....  This gives the dialog:
<p>
<p>
<IMG SRC="../advanced/select_dialog.png" ALT="../advanced/select_dialog.png"><p>
<p>
For example, applied to this diagram, after selecting the "A" object:
<p>
<IMG SRC="../advanced/select1.png" ALT="../advanced/select1.png"><p>
<UL><p>

<LI> All: All boxes and lines are selected.
<p>

<LI> None: No boxes or lines are selected (e.g., A is also unselected)
<p>

<LI> Invert: Everything is selected <I>except</I> A
<p>

<LI> Connected: A and L1 and L3 are selected, because L1 and L2 are
directly connected to A.
<p>

<LI> Transitive: A,B,C,D, and L1,L2,L3 are selected, because by
following connections, you can reach each of these.  E is left out
because it cannot be reached.
<p>

<LI> Same Type: A,B,C,D,E are selected, because they are the same
type of Dia object (i.e., all UML class objects).
<p>
</UL><p>
NOTE: If I ever figure out what the check boxes do, I'll let you know.
<p>

<H2><A NAME="L006">Shape Libraries</A></H2>
<p>
Dia comes with several shape libraries.  It is also designed to allow
you to add your own.  
<p>
These libraries are of course domain-specific, so their use should be
described in other contexts (e.g., UML should be discussed in a
tutorial on software engineering).  Here we will concentrate on the
mechanics of using the shape libraries.
<p>
The libraries are saved in the share dir for wherever dia is
installed.  For example if <TT>which dia</TT> gives <TT>/usr/bin/dia</TT>, then we
want to look at <TT>/usr/share.dia</TT>:
<p>

<PRE>
/usr/share/dia/
  dia_logo.png         Dia's logo
  shapes/
    Flowchart/         objects, in paired files (icon and shape)
      magdisk.xpm      icon
      magdisk.shape    shape description
      ...
  sheets/      object descriptions in various languages (XML)
    ER.sheet
    Flowchart.sheet
    UML.sheet
    ...
</PRE>
<p>
For example, if we are interested in the Flowchart library, and
specifically in the magnetic disk object, we find the magdisk.shape
file:
<p>

<PRE>
&lt;?xml version=&quot;1.0&quot;?&gt;

&lt;shape xmlns=&quot;http://www.daa.com.au/~james/dia-shape-ns&quot;
       xmlns:svg=&quot;http://www.w3.org/TR/2000/03/WD-SVG-20000303/DTD/svg-20000303-stylable.dtd&quot;&gt;
  &lt;name&gt;Flowchart - Magnetic Disk&lt;/name&gt;
  &lt;description&gt;Magnetic Disk&lt;/description&gt;
  &lt;icon&gt;magdisk.xpm&lt;/icon&gt;
  &lt;connections&gt;
    &lt;point x=&quot;0&quot;   y=&quot;2&quot;/&gt;
    &lt;point x=&quot;2.5&quot; y=&quot;0.4375&quot;/&gt;
    &lt;point x=&quot;5&quot;   y=&quot;0&quot;/&gt;
    &lt;point x=&quot;7.5&quot; y=&quot;0.4375&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;0&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;2.5&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;7.5&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;5&quot;/&gt;
    &lt;point x=&quot;0&quot;   y=&quot;10&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;2.5&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;5&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;7.5&quot;/&gt;
    &lt;point x=&quot;10&quot;  y=&quot;10&quot;/&gt;
    &lt;point x=&quot;2.5&quot; y=&quot;11.5625&quot;/&gt;
    &lt;point x=&quot;5&quot;   y=&quot;12&quot;/&gt;
    &lt;point x=&quot;7.5&quot; y=&quot;11.5625&quot;/&gt;
  &lt;/connections&gt;
  &lt;textbox x1=&quot;0&quot; y1=&quot;4&quot; x2=&quot;10&quot; y2=&quot;10&quot;/&gt;
  &lt;svg:svg width=&quot;10&quot; height=&quot;12&quot;&gt;
    &lt;svg:path d=&quot;M 0,2 c 2,-1.5 3,-2 5,-2 s 3,0.5 5,2 v 8
                 c -2,1.5 -3,2 -5,2 s -3,-0.5 -5,-2 v -8 z
                 M 0,2 c 2,1.5 3,2 5,2 s 3,-0.5 5,-2&quot; style=&quot;fill: default&quot;/&gt;
  &lt;/svg:svg&gt;
&lt;/shape&gt;
</PRE>
<p>
Notice:
<OL TYPE="a">
<LI> The name value maps to the description lines in the Flowchart.sheet file

<PRE>
    &lt;object name=&quot;Flowchart - Magnetic Disk&quot;&gt;
      &lt;description xml:lang=&quot;no&quot;&gt;Magnetdisk&lt;/description&gt;
      &lt;description xml:lang=&quot;fr&quot;&gt;Disque Magnétique&lt;/description&gt;
      &lt;description xml:lang=&quot;de&quot;&gt;Magnetdisk&lt;/description&gt;
      &lt;description&gt;Magnetic Disk&lt;/description&gt;
    &lt;/object&gt;
</PRE>
<p>
Thus, we get language-specific tooltips.
<p>

<LI> The icon value is the file name of the icon shown on the main
window.
<p>

<LI> The shape is described by a Scalable Vector Graphics (svg)
width/height and path.  
<p>

<LI> The location of connection points is given in the context of the
width and height.  You can add other connection points if you wish.
<p>

<LI> The associated text field is also defined in the context of the
width and height.  Originally, it is under the magdisk object. You
could move that to the middle of the magdisk object if you wished.
<p>
</OL><p>
You can make your own sheets/shapes by following the above patterns.
<p>
Some shape libraries (e.g., UML) have associated processing and
therefore are not just .shape files.  To make your own
library-with-processing requires going into the C code, and that is
beyond the scope of this tutorial.  (Perhaps embedded python will be
supported in the future, simplifying even this adventure.)
