<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
</head>

<body>
  <h1><a name="toc">Table of Contents</a></h1>

  <div style="margin-left: 2em">
    <ul>
      <li>
        <a href="#L001">Layers</a>

        <ul>
          <li><a href="#L002">Simple case</a></li>

          <li><a href="#L003">Full layering</a></li>
        </ul>
      </li>

      <li><a href="#L004">Alignment</a></li>

      <li><a href="#L005">Selection</a></li>

      <li><a href="#L006">Shape Libraries</a></li>
    </ul>
  </div>

  <h2><a name="L001" id="L001">Layers</a></h2>

  <h3><a name="L002" id="L002">Simple case</a></h3>

  <p>Suppose we have four UML "class" objects, and want to draw a box around two of them. Doing so leaves the box on top and obstructs view of the two boxed classes. Putting the box in the background solves the problem.</p>

  <p>Putting an object in the background is done by first selecting it, and then:</p>

  <ol type="a">
    <li>Long way: Right-click for menu...Objects...Send to back</li>

    <li>Shortcut: Ctl-B</li>
  </ol>

  <p><img src="../advanced/layers1.png" alt="../advanced/layers1.png" /></p>

  <h3><a name="L003" id="L003">Full layering</a></h3>

  <p>Now suppose we have a common background (e.g., project logo) and want to build our diagram on top of that. It is no longer convenient to do this object by object. Instead we want to establish the layers in advance and use them over time.</p>

  <p>If you are familiar with Gimp layers, you are in business -- it is the same mechanism. Otherwise, listen carefully.</p>

  <p>When you start a new diagram, after doing page setup, select right-click...Objects...layers. This gives:</p>

  <p><img src="../advanced/layer_dialog.png" alt="../advanced/layer_dialog.png" /></p>

  <p>Click on the "new layer" icon (page with corner turned down), and you will get a "New layer". It is automatically placed above the Background layer. Click on the layer's name to select it. Once selected, you can move it relative to the other layers using the up and down arrows. Of course you should leave the Background layer at the bottom of the stack.</p>

  <p>Clicking on the eyeball next to a layer toggles whether or not it is visible in the diagram. Generally, you build each layer separately, with just it visible, but turn on all layers occasionally to check alignment.</p>

  <p>For our example, we put a text object which says "DRAFT" on the background layer. We make this text object grey using the color selector. Then we go to the new layer and make a diagram. Making both layers visible gives:</p>

  <p><img src="../advanced/layers2.png" alt="../advanced/layers2.png" /></p>

  <h2><a name="L004" id="L004">Alignment</a></h2>

  <p>Suppose we have several objects roughly aligned:</p>

  <p><img src="../advanced/align1.png" alt="../advanced/align1.png" /></p>

  <p>We could very carefully drag them around to get them aligned. But a better approach is to use the alignment functions. Select the almost-vertically-aligned circles. Right-click to get the menu, then...Objects...Horizontal...center. This moves the objects horizontally until their centers are aligned vertically.</p>

  <p>Yes, it is a bit confusing: To align on a vertical axis, you have to select horizontal, because that is the axis on which the movement takes place.</p>

  <p>Similarly, to align objects along a single horizontal axis, you select Objects...Vertical...center. After aligning groups vertically and horizontally, we get:</p>

  <p><img src="../advanced/align2.png" alt="../advanced/align2.png" /></p>

  <h2><a name="L005" id="L005">Selection</a></h2>

  <p>The obvious ways to select are:</p>

  <ol type="a">
    <li>With pointer, click on an item</li>

    <li>With pointer, and shift-button down, click on 1 or more items</li>

    <li>With pointer, drag dashed-line box around the items to be selected</li>
  </ol>

  <p>But you might want something fancier. In that case, Right-click to get the menu and then Select.... This gives the dialog:</p>

  <p><img src="../advanced/select_dialog.png" alt="../advanced/select_dialog.png" /></p>

  <p>For example, applied to this diagram, after selecting the "A" object:</p>

  <p><img src="../advanced/select1.png" alt="../advanced/select1.png" /></p>

  <ul>
    <li>All: All boxes and lines are selected.</li>

    <li>None: No boxes or lines are selected (e.g., A is also unselected)</li>

    <li>Invert: Everything is selected <i>except</i> A</li>

    <li>Connected: A and L1 and L3 are selected, because L1 and L2 are directly connected to A.</li>

    <li>Transitive: A,B,C,D, and L1,L2,L3 are selected, because by following connections, you can reach each of these. E is left out because it cannot be reached.</li>

    <li>Same Type: A,B,C,D,E are selected, because they are the same type of Dia object (i.e., all UML class objects).</li>
  </ul>

  <p>NOTE: If I ever figure out what the check boxes do, I'll let you know.</p>

  <h2><a name="L006" id="L006">Shape Libraries</a></h2>

  <p>Dia comes with several shape libraries. It is also designed to allow you to add your own.</p>

  <p>These libraries are of course domain-specific, so their use should be described in other contexts (e.g., UML should be discussed in a tutorial on software engineering). Here we will concentrate on the mechanics of using the shape libraries.</p>

  <p>The libraries are saved in the share dir for wherever dia is installed. For example if <tt>which dia</tt> gives <tt>/usr/bin/dia</tt>, then we want to look at <tt>/usr/share.dia</tt>:</p>
  <pre>
/usr/share/dia/
  dia_logo.png         Dia's logo
  shapes/
    Flowchart/         objects, in paired files (icon and shape)
      magdisk.xpm      icon
      magdisk.shape    shape description
      ...
  sheets/      object descriptions in various languages (XML)
    ER.sheet
    Flowchart.sheet
    UML.sheet
    ...
</pre>

  <p>For example, if we are interested in the Flowchart library, and specifically in the magnetic disk object, we find the magdisk.shape file:</p>
  <pre>
&lt;?xml version="1.0"?&gt;

&lt;shape xmlns="http://www.daa.com.au/~james/dia-shape-ns"
       xmlns:svg="http://www.w3.org/TR/2000/03/WD-SVG-20000303/DTD/svg-20000303-stylable.dtd"&gt;
  &lt;name&gt;Flowchart - Magnetic Disk&lt;/name&gt;
  &lt;description&gt;Magnetic Disk&lt;/description&gt;
  &lt;icon&gt;magdisk.xpm&lt;/icon&gt;
  &lt;connections&gt;
    &lt;point x="0"   y="2"/&gt;
    &lt;point x="2.5" y="0.4375"/&gt;
    &lt;point x="5"   y="0"/&gt;
    &lt;point x="7.5" y="0.4375"/&gt;
    &lt;point x="10"  y="0"/&gt;
    &lt;point x="0"   y="2.5"/&gt;
    &lt;point x="0"   y="7.5"/&gt;
    &lt;point x="0"   y="5"/&gt;
    &lt;point x="0"   y="10"/&gt;
    &lt;point x="10"  y="2.5"/&gt;
    &lt;point x="10"  y="5"/&gt;
    &lt;point x="10"  y="7.5"/&gt;
    &lt;point x="10"  y="10"/&gt;
    &lt;point x="2.5" y="11.5625"/&gt;
    &lt;point x="5"   y="12"/&gt;
    &lt;point x="7.5" y="11.5625"/&gt;
  &lt;/connections&gt;
  &lt;textbox x1="0" y1="4" x2="10" y2="10"/&gt;
  &lt;svg:svg width="10" height="12"&gt;
    &lt;svg:path d="M 0,2 c 2,-1.5 3,-2 5,-2 s 3,0.5 5,2 v 8
                 c -2,1.5 -3,2 -5,2 s -3,-0.5 -5,-2 v -8 z
                 M 0,2 c 2,1.5 3,2 5,2 s 3,-0.5 5,-2" style="fill: default"/&gt;
  &lt;/svg:svg&gt;
&lt;/shape&gt;
</pre>

  <p>Notice:</p>

  <ol type="a">
    <li>The name value maps to the description lines in the Flowchart.sheet file
      <pre>
    &lt;object name="Flowchart - Magnetic Disk"&gt;
      &lt;description xml:lang="no"&gt;Magnetdisk&lt;/description&gt;
      &lt;description xml:lang="fr"&gt;Disque Magn√©tique&lt;/description&gt;
      &lt;description xml:lang="de"&gt;Magnetdisk&lt;/description&gt;
      &lt;description&gt;Magnetic Disk&lt;/description&gt;
    &lt;/object&gt;
</pre>

      <p>Thus, we get language-specific tooltips.</p>
    </li>

    <li>The icon value is the file name of the icon shown on the main window.</li>

    <li>The shape is described by a Scalable Vector Graphics (svg) width/height and path.</li>

    <li>The location of connection points is given in the context of the width and height. You can add other connection points if you wish.</li>

    <li>The associated text field is also defined in the context of the width and height. Originally, it is under the magdisk object. You could move that to the middle of the magdisk object if you wished.</li>
  </ol>

  <p>You can make your own sheets/shapes by following the above patterns.</p>

  <p>Some shape libraries (e.g., UML) have associated processing and therefore are not just .shape files. To make your own library-with-processing requires going into the C code, and that is beyond the scope of this tutorial. (Perhaps embedded python will be supported in the future, simplifying even this adventure.)</p>
</body>
</html>
