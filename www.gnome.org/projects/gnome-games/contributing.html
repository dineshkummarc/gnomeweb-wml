<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
	<title>Gnome Games - Developer's Guidelines</title>
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" type="text/css" href="http://www.gnome.org/default.css" />
	<link rel="stylesheet" type="text/css" href="gnomegames.css" />
        <meta HTTP-EQUIV=REFRESH CONTENT="0; URL=http://live.gnome.org/GnomeGames/Contributing">.
</head>
<body>

<div id="hdr">
	<a href="http://www.gnome.org/"><img id="logo" src="http://gnome.org/img/logo/text-64" alt="Home" title="Back to the GNOME front page" /></a>
	<p class="none"></p>
</div>

<div id="body">
     <div id="intro">
         <h1>Gnome Games - Developer's Guidelines</h1>
	 <p>These are step-by-step instructions about how to contribute to Gnome Games. These assume you are just starting to contribute to GNOME development, regulars should already have found this out. Most of these instructions also apply to other GNOME modules.</p>
     </div>
     <div>
         <h2>I've got this great idea !</h2>
	 <p>You may have some new graphics, a new feature, or a bug fix. Depending on what it is you should do different things.</p>
	 <ul>
	 <li><p><b>Graphics and Sounds</b> - submit these as a bug report in <a href="http://bugzilla.gnome.org/">Bugzilla</a>. Be warned that the size of Gnome Games is already quite large and we are quite picky about what we include, so don't feel bad if your contribution is rejected. Another frequent occurrence is that the maintainer will ask for changes, this may hurt your pride, but it is also a sign that he wants to include it. He should tell you why he wants the changes. <i>Do not submit graphics or sounds unless you are certain of their copyright status. Ideally it should be your own work.</i></p></li>
	 <li><p><b>Patches</b> - whether for bug fixes or enhancements, send these to <a href="http://bugzilla.gnome.org/">Bugzilla</a>. Details on how you should make patches can be found below.</p></li>
	 <li><p><b>Major Enhancements and Features</b> - ultimately are treated like patches, but you should also discuss them on the <a href="http://mail.gnome.org/mailman/listinfo/games-list/">mailing list</a> before-hand since their integration into Gnome Games will require co-ordination. This will also prevent duplication of effort.</p></li>
	 <li><p><b>Suggestions</b> - Suggestions come in many forms. Specific feature requests and user-interface criticism should go into <a href="http://bugzilla.gnome.org/">Bugzilla</a>, often with the severity "enhancement". Ideas which are vague or far-reaching should be discussed on the <a href="http://mail.gnome.org/mailman/listinfo/games-list/">mailing list</a>.</p></li>
	 <li><p><b>New Games</b> - Gnome Games is a very large package and there is neither the room for new games or the time to maintain them. However we can help you with advice on how to let your game make the most of GNOME technologies. Just ask on the <a href="http://mail.gnome.org/mailman/listinfo/games-list/">mailing list</a>.</p></li>
	 </ul>

	 <h2>I want to help, any suggestions ?</h2>
	 <p>If you want to help out, but don't have a great new idea of your own, then we have plenty for you. The two major sources are the the <a href="http://cvs.gnome.org/viewcvs/gnome-games/TODO?view=markup">TODO</a> file in the top of the Gnome Games distribution and the list of <a href="http://bugzilla.gnome.org/buglist.cgi?short_desc_type=allwordssubstr&amp;short_desc=&amp;product=gnome-games&amp;long_desc_type=allwordssubstr&amp;long_desc=&amp;status_whiteboard_type=allwordssubstr&amp;status_whiteboard=&amp;keywords_type=anywords&amp;keywords=&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;bug_status=NEEDINFO&amp;emailtype1=substring&amp;email1=&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;bug_id=&amp;changedin=&amp;chfieldfrom=&amp;chfieldto=Now&amp;chfieldvalue=&amp;cmdtype=doit&amp;namedcmd=gnome-games&amp;newqueryname=&amp;order=Bug+Number&amp;field0-0-0=noop&amp;type0-0-0=noop&amp;value0-0-0=">open bugs</a> in bugzilla. To avoid conflicts with two people working on the same thing, if it looks like it will take more than a small amount of effort then <a href="mailto:games-list@gnome.org">drop a line</a> to the mailing list describing your intentions.</p>
	 <p>Once you have your idea, you can proceed as above. If you are fixing a bug or implementing a feature requested in a bug report then the best place to send your code is as a patch at the end of the relevant bug report.</p>
	 <p>Most contact should be through the mailing list or bugzilla. If, for some reason, you need to contact the maintainer directly the <tt>MAINTAINERS</tt> file in the <tt>gnome-games</tt> distribution has the name and email address of the current maintainer.</p>

        <h2>Getting the code</h2>
	<p>Obviously you need some code to work with. You can work with the latest tarballs from the <a href="http://ftp.gnome.org/pub/GNOME/sources/gnome-games/">FTP site</a> but this is not recommended since they get out of date quickly. The best option is to use CVS. There are two options for using CVS: either update your entire GNOME system from CVS using something like <a href="http://www.daa.com.au/~james/software/jhbuild/">jhbuild</a> or only download Gnome Games from CVS. jhbuild is comprehensive and guaranteed to keep you up to date. Unfortunately it takes a lot of time and disk space and often keeps you too close to the bleeding edge. If you only download the gnome-games module you will have to take care of dependencies yourself.</p>
<p>The best solution depends on what you want to do. If you want to keep up with all the latest GNOME work then a full CVS build is best. If you only want to work on Gnome Games then it is best only to download the single module. To do this issue the following shell commands from the directory you want to store everything in.</p>

<div class="programlisting">
<tt>
<b>$ cvs -d :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome login</b><br/>
Logging in to :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome<br/>
CVS password:<br/>
<b>$ cvs -z3 -d :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome get gnome-common</b><br/>
...<br/>
<b>$ cvs -z3 -d :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome get gnome-games</b><br/>
...<br/>
</tt>
</div>

<p>When asked for a password just hit enter, anyone can use anonymous CVS and there is no password. When you issue each get command a long list of file names will be printed as they are downloaded. Once it is finished you will have a directory named <tt>gnome-games</tt> and a directory called <tt>gnome-common</tt>. You are almost ready.</p>
<p>Go into the <tt>gnome-common</tt> directory and type <tt>./autogen.sh --prefix=/some/directory</tt>, this will run <tt>configure</tt> and set everything up. The directory you give should be the place you want to install the GNOME software you are going to hack on. This should not be <tt>/usr</tt>. You can use your home directory, e.g. <tt>--prefix=~/gnome/</tt>.</p> 
<p>If <tt>autogen.sh</tt> complains about missing libraries or libraries that are too old then you will need to find and install appropriate versions of these libraries yourself. Usually these can be found at the <a href="http://ftp.gnome.org/pub/GNOME/sources/">GNOME FTP site</a>. If <tt>autogen.sh</tt> dies strangely then either you haven't installed gnome-common or you need to install newer <a href="http://sources.redhat.com/autobook/">autotools</a>. Once <tt>autogen.sh</tt> has run successfully you can type <tt>make install</tt> to build everything and install it.</p>
<p>Once gnome-common is installed repeat the process in the <tt>gnome-games</tt> directory. You are now ready to begin hacking !</p>

<h2>Finding your way around</h2>

<p>Now you've got the code, you need to find the bit you want to alter. All the games are in individual subdirectories. There is also a subdirectory of library code called <tt>libgames-support</tt>. The directory name <tt>po</tt> is for translations. Some subdirectories are split into further <tt>src</tt> and <tt>data</tt> subdirectories.</p>
<p>Each game has a distinct structure, but there are several common file types beyond the normal <tt>.c</tt> and <tt>.h</tt> files.</p>
<ul>
<li><p><tt>*.schemas.in</tt> - These files contain <a href="http://www.gnome.org/projects/gconf/">gconf</a> keys.</p></li>
<li><p><tt>*.desktop</tt> - Files that describe menu entries.</p></li>
<li><p><tt>help/*</tt> - The help files. These are written in <a href="http://www.docbook.org/">docbook</a> and are read by <a href="http://ftp.gnome.org/pub/GNOME/sources/yelp">yelp</a>. For English speakers the C subdirectory is probably what you want.</p></li> 
</ul>


<h2>Style</h2>

<p>In general you should use the same style as the files you are editing. There is a <a href="http://developer.gnome.org/doc/guides/programming-guidelines/code-style.html">GNOME coding style</a> but many games pre-date this. Re-indenting the code interferes with revision tracking and fills patches with useless changes so please don't do it.</p>
<p>You will also want to look at the <a href="http://developer.gnome.org/doc/guides/programming-guidelines/book1.html">GNOME programming guidelines</a> although these are a little old. For issues of user-interface style you should refer to the <a href="http://developer.gnome.org/projects/gup/hig/1.0/">Human Interface Guidelines</a>.</p>
<p>Choices of algorithm and technique are of course up to you, but remember that the programs have to run on a wide variety of hardware: Slow and fast, 32-bit and 64-bit, little-endian and big-endian. There is also a wide variety of operating systems. Use glib macros and utility functions instead of libc ones where possible, glib has already solved most of the cross-platform problems for you.</p>

<h2>Internationalization</h2>

<p>All GNOME programs are internationalized so they can be easily translated into other languages. Doing this requires special care when using strings that will be presented to the user. Often this is as simple as placing _( ) around these strings. However there are a few catches and if in doubt you should refer to the document <a href="http://www.gnome.org/~malcolm/i18n/">Internationalising GNOME Applications</a>. For example you should not construct sentences from individual pieces, what works in English often doesn't work in other languages.</p>

<h2>ChangeLogs</h2>

<p>When you make a change please document it in the ChangeLog file. Using <tt>emacs</tt> the key-combination <tt>C-x 4 a</tt> will create a new entry ready for you to fill in. Not all GNOME modules use ChangeLog entries for minor changes but for Gnome Games we appreciate it. It helps explain your patch and ensures you get proper credit.</p>

<h2>Keeping up to date</h2>

<p>Between the time you started hacking and when you finish the code in CVS has probably changed. To re-synchronize your code use the command:</p>

<tt class="programlisting">
<b>$ cvs -z3 -q -d :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome update -Pd gnome-games</b>
</tt>

<p>in the same directory you issues the previous cvs commands. You do not need to login again, in fact you only need to do that once ever. A list of files will be displayed along with a single character denoting their status. The only ones you need to know about are those labeled with a "C". The C stands for conflict and it means that someone has changed a file you changed and the changes are incompatible. If there is a C beside a file, edit that file to resolve the differences, CVS should have clearly marked the problem and there is usually no difficulty resolving them. ChangeLogs are a common source of conflicts.</p>

<h2>Patches</h2>
<p>Now that you have your code is synchronized with the GNOME CVS repository you need to generate a patch. You do this using the command:</p>

<tt class="programlisting">
<b>$ cvs -z3 -q -d :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome diff -u gnome-games > patch-file</b>
</tt>

<p><tt>patch-file</tt> should now contain the difference between your code and the code in CVS. It is ready to be sent to the maintainer to be reviewed and hopefully applied. The usual way to do this is to attach it to a bug report using the "Create New Attachment" link. If you generate a patch any other way, say using <tt>diff</tt>, then try and use the "unified" format. For <tt>diff</tt> use the <tt>-u</tt> switch.</p>

<h2>Once you have submitted a patch</h2>

<p>Once he has received it, the maintainer will have to have a look at your patch and decide whether he wants to apply it. Usually he does, but sometimes changes need to be made. The time it takes to apply the patch depends on both how busy the maintainer is and what code freezes are in place. Code freezes are used to stabilize the code before a major release and mean that only bugs are fixed, new features are not added. In that case the patch will be deferred until the next development cycle. The best time for large pieces of code is at the beginning of a development cycle, usually a week or so after a major GNOME release (e.g. 2.6.0).</p> <p>People who consistently post good quality patches are given direct access to the GNOME CVS server so they can do it themselves.</p>

<h2>Translating Documents</h2>

<p>The help files that accompany the games also need translating. If your language isn't supported, and you would like to help, here are some hints:</p>

<h3>What you must do</h3>

<ul>
<li> Get the sources as explained above.
<li> From the <tt>gnome-games</tt> source directory, go to <tt>your_game/help</tt>. if
a <tt>your_language_code</tt> directory exists, go to it (you language code is
generally a two letters code, like "fr" for French). Otherwise copy the <tt>C</tt>
directory to <tt>your_language_code</tt>. Inside are all the xml files you must
translate.
<li> Edit them with your favorite text or XML editor.
<li> Open them with the command <tt>yelp <i>&lt;filename&gt;</i></tt> to check what you've
done.
<li> When everything is done, submit it as a patch on bugzilla as explained
on this page.
<li> Warning : Some terms in the English rules aren't accurate. Please fix
them in the English rules when you find some. Post these fixes to bugzilla too. If in doubt about the meaning of a phrase, feel free to ask the maintainer for an explanation.
</ul>

<h3>What you should do</h3>

<p>It is best that you do these things, but if you get confused the maintainer can help you.</p>

<ul>
<li> Rename <tt>your_game-C.omf</tt> to <tt>your_game-your_language_code.omf</tt> and translate it.
<li> In "your_game/help/you_language_code", edit the file "Makefile.am",
and change,
"lang = C
omffile = your_game-C.omf", replacing C on each of these lines with your
language code. 
<li> From the <tt>gnome-games</tt> source directory, edit the file <tt>configure.in</tt>, find
the <tt>AC_CONFIG_FILES</tt> variable (near the end of the file) and add the line
<tt>your_game/help/you_language_code/Makefile</tt>.
</ul>

<h3>Suggestions</h3>

<ul>
<li> Edit the files use a good XML editor. Features such as color syntax highlighting help you avoid making mistakes. One suitable editor is bluefish, most popular code editors also have XML modes.  
<li> Keep in mind that uniformity helps users quickly learn new games. Keep
the everthing consistent.
<li> For <tt>aisleriot</tt>, start with <tt>aisleriot.xml</tt>, then <tt>definitions.xml</tt> (glossary), to set up
the appropriate main terms in your language, so you can use them
everywhere after that. This will bring speed and uniformity to your translation.
<li> Try to always translate the same concepts with the same sentences in
your language.
<li> Copy and paste as much as you can to avoid mispelling and to enhance
uniformity, but take care of slight differences. Also make sure the first version is error free, you don't want to be correcting a mistake you have pasted into ten different places.
<li>The <a href="http://developer.gnome.org/projects/gtp/">translation</a> and <a href="http://developer.gnome.org/projects/gdp/">documentation</a> projects have more resources.
</ul>

     </div>

</div>



<div id="sidebar">
    <p class="section">Links</p>
    <ul>
    <li><a href="index.html">Gnome Games</a></li>
    <li><a href="http://cvs.gnome.org/">CVS Tools</a></li>
    <li><a href="http://bugzilla.gnome.org/">Bug Tracking System</a></li>
    <li><a href="http://mail.gnome.org/">Mailing Lists</a></li>
    </ul>	
</div>

<div id="copyright">
	Copyright &copy; 2004, <a href="http://www.gnome.org/">The GNOME Project</a><br />
	<a href="http://validator.w3.org/check/referer">Optimized</a>
	for <a href="http://www.w3.org/">standards</a>.
</div>

</body>
</html>
